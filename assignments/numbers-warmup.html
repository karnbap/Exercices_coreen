<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Coréen — Nombres | Warming up (5×5)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="../assets/style.css">
  <style>
    :root{ --ink:#0f172a; --muted:#64748b; --brand:#2563eb; --brand-700:#1d4ed8; --surface:#f4f6f8; --card:#ffffff; --border:#e5e7eb; }
    body{font-family:'Poppins','Noto Sans KR',sans-serif;background:var(--surface);color:var(--ink)}
    .container{max-width:1024px;margin:0 auto;padding:0 1rem}
    .topbar{position:sticky;top:0;z-index:40;background:#ffffffd9;backdrop-filter:saturate(1.2) blur(6px);border-bottom:1px solid var(--border)}
    .quiz-container{max-width:960px;margin:1.5rem auto;padding:1.5rem;background:var(--card);border-radius:1rem;border:1px solid var(--border);box-shadow:0 8px 20px rgba(15,23,42,.06)}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.8rem 1.1rem;border-radius:.8rem;font-weight:700;border:1px solid transparent;cursor:pointer;transition:.2s}
    .btn-primary{background:var(--brand);color:#fff}.btn-primary:hover{background:var(--brand-700)}
    .btn-secondary{background:#f8fafc;border-color:var(--border);color:#111827}
    .btn-outline{background:#fff;border-color:var(--border);color:#111827}
    .segmented{display:grid;grid-template-columns:1fr;gap:.75rem}
    @media(min-width:768px){.segmented{grid-template-columns:repeat(4,minmax(0,1fr))}}
    .seg-btn{border-radius:1rem;padding:1rem 1.25rem;border:1px solid var(--border);background:#fff;display:flex;flex-direction:column;align-items:center;text-align:center;gap:.35rem;font-weight:800;transition:.2s}
    .seg-btn:hover{transform:translateY(-1px);box-shadow:0 6px 18px rgba(2,6,23,.08)}
    .progress-dot{width:.6rem;height:.6rem;border-radius:9999px;background:#e5e7eb}
    .progress-dot.on{background:#22c55e}
    .brand-tag{position:fixed;right:16px;bottom:12px;font-size:12px;color:#9ca3af}
    .hidden{display:none}
    /* 듣기 버튼 강조 */
    .btn-sound-big{position:relative;padding:1rem 1.25rem;border-radius:1rem;font-size:1.05rem}
    .btn-sound-big::after{content:"";position:absolute;inset:-6px;border-radius:1.25rem;border:2px solid rgba(37,99,235,.55);animation:ping 1.6s cubic-bezier(0,0,.2,1) infinite}
    @keyframes ping{0%{transform:scale(0.95);opacity:.9}80%{transform:scale(1.15);opacity:0}100%{opacity:0}}
    .listen-tip{font-size:.8rem;color:#2563eb;background:#eff6ff;border:1px solid #bfdbfe;border-radius:.6rem;padding:.15rem .5rem;font-weight:800}
  </style>
</head>
<body>
  <div class="topbar">
    <div class="container py-2 flex items-center justify-between gap-3">
      <div class="flex items-center gap-3 text-sm text-slate-600">
        <i class="fa-solid fa-water"></i><span>Pongdang · made by 성일</span>
      </div>
      <button onclick="window.print()" class="btn btn-outline"><i class="fa-solid fa-print"></i> Imprimer / 인쇄</button>
    </div>
  </div>

  <div class="quiz-container">
    <label class="block text-sm font-semibold text-slate-700 mb-2">Nom de l’élève / 이름</label>
    <input id="student-name" class="w-full border-2 border-slate-300 rounded-lg p-3 focus:outline-none focus:border-blue-400" placeholder="Ex. Camille / Lucas / Zoé" />
  </div>

  <!-- 설명 섹션은 유지 -->

  <!-- 속도 선택 -->
  <div id="mode-picker" class="quiz-container hidden">
    <h3 class="text-2xl font-extrabold text-center mb-1">Choisis ta vitesse / 연습 속도 고르기</h3>
    <p class="text-center text-sm text-slate-600 mb-5">Warming up: 4 groupes × lecture + imitation.</p>
    <div class="segmented">
      <button class="seg-btn" onclick="WU_go('slow')"><div class="text-lg"><i class="fa-solid fa-turtle"></i> 0.7×</div><div class="sub text-slate-500">Débutant / 초보</div></button>
      <button class="seg-btn" onclick="WU_go('normal')"><div class="text-lg"><i class="fa-regular fa-face-smile"></i> 1.0×</div><div class="sub text-slate-500">Normal / 보통</div></button>
      <button class="seg-btn" onclick="WU_go('fast')"><div class="text-lg"><i class="fa-solid fa-person-running"></i> 1.5×</div><div class="sub text-slate-500">Rapide / 잘 읽음</div></button>
      <button class="seg-btn" onclick="WU_go('turbo')"><div class="text-lg"><i class="fa-solid fa-bolt"></i> 2.0×</div><div class="sub text-slate-500">Turbo / 2배속</div></button>
    </div>
  </div>

  <!-- 워밍업 본문 (단계 내비 제거) -->
  <div id="warmup-screen" class="quiz-container hidden">
    <h2 class="text-3xl font-extrabold mb-2 text-center">Warming up 🗣️ — Nombres (5×5)</h2>
    <div class="p-4 bg-white rounded-lg border mb-4 text-center">
      <span class="listen-tip"><i class="fa-solid fa-bullhorn"></i> 먼저 “Écouter / 듣기” 버튼을 눌러요 → 그 다음 따라 읽기</span>
    </div>

    <div id="global-progress" class="flex items-center gap-2 mb-6 justify-center">
      <span class="text-xs font-semibold text-slate-500">Étapes:</span>
      <div class="progress-dot on"></div><div class="progress-dot"></div><div class="progress-dot"></div><div class="progress-dot"></div>
    </div>

    <div id="stages-wrap" class="space-y-8"></div>

    <div id="finish-wrap" class="hidden mt-8 text-center">
      <div class="p-5 bg-white rounded-lg border mb-4 max-w-xl mx-auto">
        <div class="text-lg font-extrabold">👏 Warming up terminé !</div>
        <div class="text-slate-600 mt-1">Envoie le résultat au professeur.</div>
      </div>
      <div class="flex flex-wrap gap-2 justify-center">
        <button id="btn-send" class="btn btn-primary"><i class="fa-solid fa-paper-plane"></i> Terminer · Envoyer</button>
        <button class="btn btn-secondary" onclick="WU_go('slow')">0.7× Refaire</button>
        <button class="btn btn-secondary" onclick="WU_go('normal')">1.0× Refaire</button>
        <button class="btn btn-secondary" onclick="WU_go('fast')">1.5× Refaire</button>
        <button class="btn btn-secondary" onclick="WU_go('turbo')">2.0× Refaire</button>
      </div>
    </div>
  </div>

  <div class="brand-tag">made by 성일 · Pongdang · Lapeace29@gmail.com</div>

  <script>window.PONGDANG_TTS=window.PONGDANG_TTS||{provider:'openai'};window.PONGDANG_FN_BASE=window.PONGDANG_FN_BASE||'/.netlify/functions';</script>
  <script defer src="../assets/student-gate.js"></script>
  <script defer src="../assets/pronun-utils.js"></script>
  <script defer src="../assets/pronun-vowel-middleware.js"></script>
  <script defer src="../assets/grading-criteria.js"></script>
  <script defer src="../assets/warmup-5x5.js?v=20250910"></script>
  <script>
    document.addEventListener('DOMContentLoaded', ()=>{
      const exp=document.getElementById('explanation-screen');const pick=document.getElementById('mode-picker');const wu=document.getElementById('warmup-screen');
      document.getElementById('explanation-next-btn')?.addEventListener('click', ()=>{exp?.classList.add('hidden');pick.classList.remove('hidden');wu.classList.remove('hidden');});
      exp?.classList.remove('hidden');pick.classList.add('hidden');wu.classList.add('hidden');
      pick.addEventListener('click',(e)=>{const btn=e.target.closest('.seg-btn');if(btn){pick.classList.add('hidden');wu.classList.remove('hidden');}});
    });
  </script>
</body>
</html>
