<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Comment dire Â« Comme Â» en corÃ©en | ê°™ì•„ìš” Â· ì²˜ëŸ¼ Â· ê°™ì´ Â· ê°™ì€</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
  <style>
    :root{--ink:#0f172a}
    body{font-family:'Inter','Noto Sans KR',sans-serif;background:#f8fafc;color:var(--ink)}
    .korean{font-family:'Noto Sans KR',sans-serif}
    .card{background:#fff;border-radius:1rem;padding:1.25rem;box-shadow:0 4px 14px rgba(0,0,0,.06);border:1px solid #e5e7eb}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:.6rem 1rem;border-radius:.75rem;font-weight:700;border:2px solid transparent;transition:.2s}
    .btn-gray{background:#f3f4f6;color:#374151;border-color:#e5e7eb}
    .btn-gray:hover{background:#e5e7eb}
    .btn-blue{background:#2563eb;color:#fff}
    .btn-blue:hover{filter:brightness(.95)}
    .tag{font-size:.8rem;border:1px solid #e2e8f0;border-radius:.5rem;padding:.2rem .5rem;background:#f8fafc}
    .choice.correct{border-color:#22c55e;background:#dcfce7;color:#166534}
    .choice.incorrect{border-color:#ef4444;background:#fee2e2;color:#991b1b}
    .exercise{border:1px solid #e5e7eb;border-radius:1rem;padding:1rem;background:#fff}
    .exercise.solved{background:#f0fdf4;border-color:#bbf7d0}
    .feedback{border-radius:.75rem;padding:1rem;margin-top:.75rem}
    .feedback.ok{background:#dcfce7;color:#166534}
    .feedback.no{background:#fee2e2;color:#991b1b}
    .results-enter{animation:pop .25s ease}
    @keyframes pop{from{transform:scale(.98);opacity:0}to{transform:scale(1);opacity:1}}
    .creator{font-size:.85rem;color:#64748b}
  </style>
</head>
<body class="p-4 md:p-8">

  <!-- Top Bar -->
  <div class="max-w-5xl mx-auto mb-4 flex items-center justify-between">
    <div class="creator">
      <span class="font-semibold">made by ì„±ì¼, Pongdang</span> Â· <a class="underline" href="mailto:Lapeace29@gmail.com">Lapeace29@gmail.com</a>
    </div>
    <div class="flex gap-2">
      <button onclick="window.print()" class="btn btn-gray" title="Imprimer / ì¸ì‡„">ğŸ–¨ï¸ Imprimer Â· ì¸ì‡„</button>
      <!-- Page dâ€™accueil button intentionally removed -->
    </div>
  </div>

  <main class="max-w-5xl mx-auto space-y-10">
    <!-- Title -->
    <header class="text-center">
      <h1 class="text-4xl md:text-5xl font-black text-indigo-600 mb-2">Comment dire Â« COMME Â» en corÃ©en ?</h1>
      <p class="text-slate-600">RÃ¨gle simple + Exercices (FRÂ·KO). âœ¨</p>
      <div class="mt-3 flex items-center justify-center gap-2">
        <span class="tag">ê°™ì•„ìš”</span>
        <span class="tag">ì²˜ëŸ¼</span>
        <span class="tag">ê°™ì´</span>
        <span class="tag">ê°™ì€</span>
      </div>
    </header>

    <!-- Golden Rule -->
    <section class="card">
      <h2 class="text-2xl font-bold mb-2">La rÃ¨gle dâ€™or ğŸ”‘</h2>
      <p class="text-lg">Demande-toi si Â« comme Â» touche <b>un verbe (une action)</b> âœ <span class="korean font-bold">ì²˜ëŸ¼/ê°™ì´</span>,
        <br class="hidden sm:block"/>ou bien <b>un nom (un objet)</b> âœ <span class="korean font-bold">ê°™ì€</span>.
        <br/>Pour une simple identitÃ© Â« Ãªtre comme Â», on dit <span class="korean font-bold">ê°™ì•„ìš”</span>.
      </p>
    </section>

    <!-- Explanations -->
    <section class="grid md:grid-cols-2 gap-6">
      <div class="card">
        <h3 class="text-2xl font-bold text-cyan-600 korean mb-2">ê°™ì•„ìš”</h3>
        <p class="text-slate-600 mb-3">Â« Ãªtre comme Â» â€” comparaison simple.</p>
        <div class="bg-cyan-50 border border-cyan-100 rounded-xl p-3">
          <p class="text-sm text-slate-600">Â« Elle est comme un ange. Â»</p>
          <p class="korean text-xl font-bold text-cyan-700">â†’ ì²œì‚¬ ê°™ì•„ìš”.</p>
        </div>
        <!-- ì¶”ê°€ ì„¤ëª…/ì£¼ì˜ -->
        <p class="text-slate-600 mt-2">
          Â« <b>Ãªtre comme</b> Â» â€” comparaison simple. <br>
          ğŸ‘‰ ON compare <b>Nom1 (elle)</b> avec un <b>nom2 (ange)</b>.
        </p>
        <div class="mt-3 bg-amber-50 border border-amber-200 rounded-xl p-3">
          <p class="font-bold text-amber-800">âš ï¸ Attention</p>
          <p class="text-slate-700 mt-1">
            Â« Il est rapide comme un Ã©clair Â» â†’ <b>Ãªtre + comme ?</b> <span class="korean">ì²˜ëŸ¼</span> ?! <b>Non</b> !
            Il y a un adjectif Â« rapide Â» et en corÃ©en les adjectifs viennent dâ€™un verbe â†’ on utilise
            <span class="korean font-semibold">ì²˜ëŸ¼ / ê°™ì´</span>.
          </p>
          <p class="korean text-lg font-bold mt-1">ê·¸ ì‚¬ëŒì€ ë²ˆê°œì²˜ëŸ¼ ë¹¨ë¼ìš”.</p>
        </div>
      </div>
      <div class="card">
        <h3 class="text-2xl font-bold text-orange-600 korean mb-2">ì²˜ëŸ¼ / ê°™ì´</h3>
        <p class="text-slate-600 mb-3">dÃ©crit la <b>maniÃ¨re</b> dâ€™une action (verbe). Souvent interchangeables.</p>
        <div class="bg-orange-50 border border-orange-100 rounded-xl p-3 mb-3">
          <p class="text-sm text-slate-600">Â« Je mange comme une vache. Â»</p>
          <p class="korean text-xl font-bold text-orange-700">â†’ ì†Œì²˜ëŸ¼ ë¨¹ì–´ìš” / ì†Œê°™ì´ ë¨¹ì–´ìš”.</p>
        </div>
        <div class="bg-red-50 border border-red-200 rounded-xl p-3">
          <p class="font-bold text-red-700">âš ï¸ <span class="korean">ê°™ì´</span> = Â« ensemble Â» aussi.</p>
          <p class="text-sm text-slate-600 mt-1">Â« Je suis allÃ© avec mon ami. Â»</p>
          <p class="korean font-bold text-red-800">â†’ ì¹œêµ¬ë‘ ê°™ì´ ê°”ì–´ìš”. (âœ”)</p>
          <p class="korean text-slate-500 line-through">â†’ ì¹œêµ¬ì²˜ëŸ¼ ê°”ì–´ìš”. (âœ˜)</p>
        </div>
      </div>
      <div class="card md:col-span-2">
        <h3 class="text-2xl font-bold text-violet-600 korean mb-2">ê°™ì€</h3>
        <p class="text-slate-600 mb-3">dÃ©crit un <b>nom</b> : Â« qui est comme â€¦ Â»</p>
        <div class="bg-violet-50 border border-violet-100 rounded-xl p-3">
          <p class="text-sm text-slate-600">Â« Câ€™est une amie comme ma famille. Â»</p>
          <p class="korean text-xl font-bold text-violet-700">â†’ ê°€ì¡± ê°™ì€ ì¹œêµ¬ì˜ˆìš”.</p>
          <p class="text-xs italic text-slate-500 mt-1">(Une amie qui est comme ma famille)</p>
        </div>
      </div>
      <div class="card md:col-span-2">
        <h3 class="text-xl font-bold mb-2">Â« Danse Â» : nom vs maniÃ¨re</h3>
        <div class="grid sm:grid-cols-2 gap-4">
          <div class="bg-blue-50 p-3 rounded-xl">
            <p class="korean font-bold text-blue-800">ë³„ ê°™ì€ ì¶¤</p>
            <p class="text-sm text-blue-800">ê°™ì€ â†’ nom Â« ì¶¤ Â» : Â« une danse <b>qui est comme</b> une Ã©toile Â»</p>
          </div>
          <div class="bg-green-50 p-3 rounded-xl">
            <p class="korean font-bold text-green-800">ë³„ ê°™ì´ ì¶¤ì„ ì¶°ìš”</p>
            <p class="text-sm text-green-800">ê°™ì´ â†’ verbe Â« ì¶¤ì„ ì¶°ìš” Â» : Â« danser <b>Ã  la maniÃ¨re</b> dâ€™une Ã©toile Â»</p>
          </div>
        </div>
      </div>
    </section>

    <!-- SUMMARY TABLE -->
    <section class="card">
      <h2 class="text-2xl font-bold mb-3">En rÃ©sumÃ© ğŸ“</h2>
      <div class="overflow-x-auto">
        <table class="w-full text-left text-sm">
          <thead class="bg-slate-100">
            <tr>
              <th class="p-3">Phrase FR</th>
              <th class="p-3">Verbe / Nom</th>
              <th class="p-3">CorÃ©en</th>
              <th class="p-3">Note</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-b">
              <td class="p-3">Je mange comme une vache</td>
              <td class="p-3 text-orange-600 font-semibold">Verbe</td>
              <td class="p-3 korean">ì†Œì²˜ëŸ¼ / ì†Œê°™ì´ ë¨¹ì–´ìš”</td>
              <td class="p-3">maniÃ¨re (verbe)</td>
            </tr>
            <tr class="border-b bg-slate-50">
              <td class="p-3">Une amie comme ma famille</td>
              <td class="p-3 text-violet-600 font-semibold">Nom</td>
              <td class="p-3 korean">ê°€ì¡± ê°™ì€ ì¹œêµ¬ì˜ˆìš”</td>
              <td class="p-3">type de nom</td>
            </tr>
            <tr class="border-b">
              <td class="p-3">Elle est comme un ange</td>
              <td class="p-3 text-cyan-600 font-semibold">ÃŠtre comme</td>
              <td class="p-3 korean">ì²œì‚¬ ê°™ì•„ìš”</td>
              <td class="p-3">identitÃ©</td>
            </tr>
            <tr>
              <td class="p-3">Je vais avec mon ami</td>
              <td class="p-3 text-red-600 font-semibold">Â« Ensemble Â»</td>
              <td class="p-3 korean">ì¹œêµ¬ë‘ ê°™ì´ ê°”ì–´ìš”</td>
              <td class="p-3">ê°™ì´ = ensemble</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- EXERCISES SET 1 (only) -->
    <section id="set1" class="space-y-4">
      <div class="flex items-center justify-between">
        <h2 class="text-3xl font-bold">ì—°ìŠµë¬¸ì œ Â· Exercices â€” <span class="text-slate-500">choix immÃ©diat</span></h2>
        <button id="reset1" class="btn btn-gray">Recommencer</button>
      </div>
      <div id="list1" class="space-y-3"></div>
    </section>

    <!-- Finish -->
    <section class="flex flex-col items-center gap-3 pt-4">
      <button id="finishBtn" class="btn btn-blue text-lg px-6">Terminer Â· ëë‚´ê¸°</button>
      <p class="text-sm text-slate-500">Vous verrez votre score et la correction dÃ©taillÃ©e. / ì ìˆ˜ì™€ í•´ì„¤ì„ ë³¼ ìˆ˜ ìˆì–´ìš”.</p>
      <div id="results" class="hidden results-enter w-full"></div>
    </section>

    <!-- Footer Nav -->
    <footer class="pt-10">
      <div class="flex items-center justify-between">
        <a href="../index.html" class="btn btn-gray">âŸµ Exercices prÃ©cÃ©dents / ì´ì „ ì—°ìŠµìœ¼ë¡œ</a>
        <button onclick="window.print()" class="btn btn-gray">ğŸ–¨ï¸ Imprimer / ì¸ì‡„</button>
      </div>
      <div class="creator mt-6 text-center">
        <span class="font-semibold">made by ì„±ì¼, Pongdang</span> Â· <a class="underline" href="mailto:Lapeace29@gmail.com">Lapeace29@gmail.com</a>
      </div>
    </footer>
  </main>

  <script>
  // --------------------------
  // Dataset (SET 1 only; FRâ†”KO ë³´ì¡°ì •ë³´ í¬í•¨)
  // --------------------------
  const data1 = [
    // â€”â€”â€” ê°™ì•„ìš” (ÃŠtre comme)
    { type:'id',
      fr:"Ce bÃ©bÃ© est comme un ange.",
      ans:"etre",
      exp:"Simple comparaison d'identitÃ© (Â« Ãªtre comme Â»).",
      ko:"ì´ ì•„ê¸°ëŠ” ì²œì‚¬ ê°™ì•„ìš”.",
      vocab:[{fr:"bÃ©bÃ©",ko:"ì•„ê¸°"},{fr:"ange",ko:"ì²œì‚¬"}]
    },
    { type:'id',
      fr:"Le temps est comme de l'or.",
      ans:"etre",
      exp:"IdentitÃ© : le temps EST comme l'or.",
      ko:"ì‹œê°„ì€ ê¸ˆ ê°™ì•„ìš”.",
      vocab:[{fr:"temps",ko:"ì‹œê°„"},{fr:"or",ko:"ê¸ˆ"}]
    },
    { type:'fill',
      parts:["ì´ê±´ ê¿ˆ", "."],
      ok:["ê°™ì•„ìš”"],
      exp:"Â« Ceci est comme un rÃªve. Â»",
      frTrans:"Ceci est comme un rÃªve.",
      vocab:[{fr:"ceci",ko:"ì´ê²ƒ"},{fr:"rÃªve",ko:"ê¿ˆ"}]
    },
    { type:'fill',
      parts:["ì˜¤ëŠ˜ì€ ì–´ì œ", "."],
      ok:["ê°™ì•„ìš”"],
      exp:"Â« Aujourd'hui est comme hier. Â»",
      frTrans:"Aujourdâ€™hui est comme hier.",
      vocab:[{fr:"aujourdâ€™hui",ko:"ì˜¤ëŠ˜"},{fr:"hier",ko:"ì–´ì œ"}]
    },

    // â€”â€”â€” ê°™ì€ (Nom)
    { type:'id',
      fr:"C'est un homme comme un lion.",
      ans:"nom",
      exp:"Â« Comme Â» dÃ©crit le nom â€˜hommeâ€™.",
      ko:"ì‚¬ì ê°™ì€ ë‚¨ìì˜ˆìš”.",
      vocab:[{fr:"homme",ko:"ë‚¨ì"},{fr:"lion",ko:"ì‚¬ì"}]
    },
    { type:'id',
      fr:"Je cherche une maison comme un chÃ¢teau.",
      ans:"nom",
      exp:"DÃ©crit le nom â€˜maisonâ€™.",
      ko:"ì„± ê°™ì€ ì§‘ì„ ì°¾ì•„ìš”.",
      vocab:[{fr:"maison",ko:"ì§‘"},{fr:"chÃ¢teau",ko:"ì„±"}]
    },
    { type:'id',
      fr:"C'est un cadeau comme un trÃ©sor.",
      ans:"nom",
      exp:"DÃ©crit le nom â€˜cadeauâ€™.",
      ko:"ë³´ë¬¼ ê°™ì€ ì„ ë¬¼ì´ì—ìš”.",
      vocab:[{fr:"cadeau",ko:"ì„ ë¬¼"},{fr:"trÃ©sor",ko:"ë³´ë¬¼"}]
    },
    { type:'id',
      fr:"J'ai un ami comme un frÃ¨re.",
      ans:"nom",
      exp:"DÃ©crit le nom â€˜amiâ€™.",
      ko:"í˜•ì œ ê°™ì€ ì¹œêµ¬ê°€ ìˆì–´ìš”.",
      vocab:[{fr:"ami",ko:"ì¹œêµ¬"},{fr:"frÃ¨re",ko:"í˜•ì œ"}]
    },
    { type:'fill',
      parts:["ì²œì‚¬", " ì•„ê¸°ì˜ˆìš”."],
      ok:["ê°™ì€"],
      exp:"On dÃ©crit le nom â€˜ì•„ê¸°â€™.",
      frTrans:"Câ€™est un bÃ©bÃ© comme un ange.",
      vocab:[{fr:"bÃ©bÃ©",ko:"ì•„ê¸°"},{fr:"ange",ko:"ì²œì‚¬"}]
    },
    { type:'fill',
      parts:["ë°”ë‹¤", " ë„“ì€ ë§ˆìŒ"],
      ok:["ê°™ì€"],
      exp:"On dÃ©crit le nom â€˜ë§ˆìŒâ€™.",
      frTrans:"Un cÅ“ur large comme la mer.",
      vocab:[{fr:"mer",ko:"ë°”ë‹¤"},{fr:"cÅ“ur",ko:"ë§ˆìŒ"}]
    },
    { type:'fill',
      parts:["ê·¸ë…€ëŠ” ì—¬ìš°", " ì—¬ìì˜ˆìš”."],
      ok:["ê°™ì€"],
      exp:"On dÃ©crit le nom â€˜ì—¬ìâ€™.",
      frTrans:"Câ€™est une femme comme un renard.",
      vocab:[{fr:"femme",ko:"ì—¬ì"},{fr:"renard",ko:"ì—¬ìš°"}]
    },

    // â€”â€”â€” ì²˜ëŸ¼/ê°™ì´ (Verbe)
    { type:'id',
      fr:"Il court comme le vent.",
      ans:"verbe",
      exp:"Â« Comme Â» dÃ©crit lâ€™action courir.",
      ko:"ê·¸ëŠ” ë°”ëŒì²˜ëŸ¼ ë‹¬ë ¤ìš”.",
      vocab:[{fr:"courir",ko:"ë‹¬ë¦¬ë‹¤"},{fr:"vent",ko:"ë°”ëŒ"}]
    },
    { type:'id',
      fr:"Elle chante comme une sirÃ¨ne.",
      ans:"verbe",
      exp:"Â« Comme Â» dÃ©crit la maniÃ¨re de chanter.",
      ko:"ê·¸ë…€ëŠ” ì¸ì–´ì²˜ëŸ¼ ë…¸ë˜í•´ìš”.",
      vocab:[{fr:"chanter",ko:"ë…¸ë˜í•˜ë‹¤"},{fr:"sirÃ¨ne",ko:"ì¸ì–´"}]
    },
    { type:'id',
      fr:"Il danse comme un professionnel.",
      ans:"verbe",
      exp:"Â« Comme Â» dÃ©crit la maniÃ¨re de danser.",
      ko:"ê·¸ëŠ” ì „ë¬¸ê°€ì²˜ëŸ¼ ì¶¤ì„ ì¶°ìš”.",
      vocab:[{fr:"danser",ko:"ì¶¤ì¶”ë‹¤"},{fr:"professionnel",ko:"ì „ë¬¸ê°€"}]
    },
    { type:'id',
      fr:"Elle parle comme un poÃ¨te.",
      ans:"verbe",
      exp:"Â« Comme Â» dÃ©crit la maniÃ¨re de parler.",
      ko:"ê·¸ë…€ëŠ” ì‹œì¸ì²˜ëŸ¼ ë§í•´ìš”.",
      vocab:[{fr:"parler",ko:"ë§í•˜ë‹¤"},{fr:"poÃ¨te",ko:"ì‹œì¸"}]
    },
    { type:'fill',
      parts:["ê·¸ëŠ” ë°”ëŒ", " ë‹¬ë ¤ìš”."],
      ok:["ì²˜ëŸ¼","ê°™ì´"],
      exp:"ManiÃ¨re de courir.",
      frTrans:"Il court comme le vent.",
      vocab:[{fr:"courir",ko:"ë‹¬ë¦¬ë‹¤"},{fr:"vent",ko:"ë°”ëŒ"}]
    },
    { type:'fill',
      parts:["ìš°ë¦¬ ì•„ë¹ ëŠ” ê³°", " ììš”."],
      ok:["ì²˜ëŸ¼","ê°™ì´"],
      exp:"ManiÃ¨re de dormir.",
      frTrans:"Mon pÃ¨re dort comme un ours.",
      vocab:[{fr:"dormir",ko:"ìë‹¤"},{fr:"ours",ko:"ê³°"}]
    },
    { type:'fill',
      parts:["ê°€ìˆ˜", " ë…¸ë˜ë¥¼ ì˜í•´ìš”."],
      ok:["ì²˜ëŸ¼","ê°™ì´"],
      exp:"ManiÃ¨re de chanter.",
      frTrans:"Il/Elle chante comme un chanteur.",
      vocab:[{fr:"chanteur",ko:"ê°€ìˆ˜"},{fr:"chanter",ko:"ë…¸ë˜í•˜ë‹¤"}]
    },
    { type:'fill',
      parts:["ì•„ê¸°ê°€ ì–´ë¥¸", " ë§í•´ìš”."],
      ok:["ì²˜ëŸ¼","ê°™ì´"],
      exp:"ManiÃ¨re de parler.",
      frTrans:"Le bÃ©bÃ© parle comme un adulte.",
      vocab:[{fr:"bÃ©bÃ©",ko:"ì•„ê¸°"},{fr:"adulte",ko:"ì–´ë¥¸"}]
    },
    { type:'fill',
      parts:["ê·¸ëŠ” ë¡œë´‡", " ê±¸ì–´ìš”."],
      ok:["ì²˜ëŸ¼","ê°™ì´"],
      exp:"ManiÃ¨re de marcher.",
      frTrans:"Il marche comme un robot.",
      vocab:[{fr:"marcher",ko:"ê±·ë‹¤"},{fr:"robot",ko:"ë¡œë´‡"}]
    }
  ];

  // Render helpers
  const list1 = document.getElementById('list1');
  // (ì¶”ê°€) ì‹œì‘ ì‹œê° ê¸°ë¡ â€“ ì „ì†¡ payloadì˜ totalTimeSeconds ê³„ì‚°ìš©
  const sessionStart = Date.now();

  function renderSet1(){
    list1.innerHTML='';
    data1.forEach((ex,i)=>{
      const wrap=document.createElement('div');
      wrap.className='exercise';
      wrap.id=`s1-${i}`;
      let inner=`
        <div class="flex items-start gap-3">
          <div class="text-xl font-bold text-blue-500">${i+1}.</div>
          <div class="flex-1">
      `;
      if(ex.type==='id'){
        inner+=`
          <p class="text-slate-700 mb-3">Quel est le type de la phrase ?</p>
          <p class="font-semibold text-lg mb-1">Â« ${ex.fr} Â»</p>
          <p class="korean text-sky-700 mb-2">${ex.ko}</p>
          <ul class="list-disc list-inside text-sm text-slate-600 mb-3">
            ${ex.vocab.map(v=>`<li>${v.fr} â†’ <span class="korean">${v.ko}</span></li>`).join('')}
          </ul>
          <div class="flex flex-wrap gap-2">
            <button class="btn btn-gray choice" data-a="verbe">Action (Verbe) ğŸƒâ€â™‚ï¸</button>
            <button class="btn btn-gray choice" data-a="nom">Objet (Nom) âœï¸</button>
            <button class="btn btn-gray choice" data-a="etre">Identification (ÃŠtre comme) ğŸ™‹â€â™€ï¸</button>
          </div>
          <p class="hidden mt-3 text-sm text-slate-600 exp">Explication : ${ex.exp}</p>
        `;
      }else{
        const opts=["ê°™ì•„ìš”","ì²˜ëŸ¼","ê°™ì´","ê°™ì€"].map(o=>`<button class="btn btn-gray choice korean" data-a="${o}">${o}</button>`).join('');
        inner+=`
          <p class="text-slate-700 mb-2">ComplÃ¨te la phrase :</p>
          <p class="korean text-2xl font-semibold mb-2">${ex.parts[0]} <span class="inline-block bg-slate-200 rounded-md w-24 h-8 align-middle"></span> ${ex.parts[1]}</p>
          <p class="text-sm text-rose-700 mb-2">FR: ${ex.frTrans}</p>
          <ul class="list-disc list-inside text-sm text-slate-600 mb-3">
            ${ex.vocab.map(v=>`<li>${v.fr} â†’ <span class="korean">${v.ko}</span></li>`).join('')}
          </ul>
          <div class="flex flex-wrap gap-2">${opts}</div>
          <p class="hidden mt-3 text-sm text-slate-600 exp">Explication : ${ex.exp}</p>
        `;
      }
      inner+=`</div></div>`;
      wrap.innerHTML=inner;
      list1.appendChild(wrap);
    });

    // events
    list1.querySelectorAll('.exercise').forEach((box,idx)=>{
      const ex=data1[idx];
      box.querySelectorAll('.choice').forEach(btn=>{
        btn.addEventListener('click',()=>{
          const picked=btn.dataset.a;
          const ok = ex.type==='id' ? (picked===ex.ans) : ex.ok.includes(picked);
          // disable all
          box.querySelectorAll('.choice').forEach(b=>b.disabled=true);
          // mark
          if(ok){ btn.classList.add('correct'); box.classList.add('solved'); }
          else{
            btn.classList.add('incorrect');
            // show correct
            box.querySelectorAll('.choice').forEach(b=>{
              const isOk = ex.type==='id' ? (b.dataset.a===ex.ans) : ex.ok.includes(b.dataset.a);
              if(isOk) b.classList.add('correct');
            });
          }
          box.querySelector('.exp').classList.remove('hidden');
          // store
          box.dataset.correct = ok ? '1' : '0';
          box.dataset.picked = picked;   // << ì¶”ê°€: ì „ì†¡ìš© ì„ íƒê°’ ì €ì¥ (UI ë³€í™” ì—†ìŒ)
        });
      });
    });
  }

  // Reset
  document.getElementById('reset1').addEventListener('click', renderSet1);

  // Initial render
  renderSet1();

  // ---------- ì „ì†¡ ìœ í‹¸ (UI ë³€ê²½ ì—†ìŒ) ----------
  async function sendResults(payload){
    const res = await fetch('/.netlify/functions/send-results', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify(payload)
    });
    if(!res.ok) throw new Error(`send-results HTTP ${res.status}`);
    return res.json().catch(()=>({ok:true}));
  }
  async function logError(where, step, err, extra){
    try{
      await fetch('/.netlify/functions/log-error',{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ where, step, message:String(err), extra })
      });
    }catch(_){}
  }

  // --------------------------
  // Finish & Results (SET 1 only) + ì„ ìƒë‹˜ ì „ì†¡
  // --------------------------
  document.getElementById('finishBtn').addEventListener('click', async ()=>{
    const s1Total = data1.length;
    let s1Ok = 0;
    const boxes = Array.from(document.querySelectorAll('#list1 .exercise'));
    boxes.forEach((box)=>{ s1Ok += (box.dataset.correct==='1') ? 1 : 0; });

    const res = document.getElementById('results');
    res.classList.remove('hidden');
    res.innerHTML = `
      <div class="card">
        <h3 class="text-2xl font-bold mb-2">ğŸ“Š RÃ©sultats / ê²°ê³¼</h3>
        <p class="text-lg mb-2">Score : <b>${s1Ok} / ${s1Total}</b></p>
        <p id="sendStatus" class="text-sm text-slate-500 mb-4">Envoi au professeurâ€¦</p>
        <details class="mt-2">
          <summary class="cursor-pointer text-slate-700">Voir la correction</summary>
          <ol class="list-decimal list-inside mt-2 space-y-1 text-sm">
            ${data1.map(ex=>{
              if(ex.type==='id'){
                return `<li>Â« ${ex.fr} Â» â†’ <b>${ex.ans}</b>
                  <span class="block text-slate-500">${ex.exp}</span>
                  <span class="block korean text-sky-700">${ex.ko}</span></li>`;
              }else{
                return `<li class="korean">${ex.parts[0]} <b>${ex.ok.join(' / ')}</b> ${ex.parts[1]}
                  <span class="block text-slate-500">${ex.exp}</span>
                  <span class="block text-rose-700">FR: ${ex.frTrans}</span></li>`;
              }
            }).join('')}
          </ol>
        </details>
        <div class="mt-4 flex flex-wrap gap-2">
          <button class="btn btn-gray" onclick="window.scrollTo({top:0,behavior:'smooth'})">Revoir la leÃ§on</button>
          <button class="btn btn-gray" onclick="location.reload()">ë‹¤ì‹œí•˜ê¸° Â· Recommencer</button>
        </div>
      </div>
    `;

    // â–¶ ì „ì†¡ payload êµ¬ì„± (í”„ë¡œì íŠ¸ ê·œê²©)
    const now = Date.now();
    const payload = {
      studentName: window.prompt("Nom de l'Ã©lÃ¨ve / í•™ìƒ ì´ë¦„ ?", "")?.trim() || "Ã‰lÃ¨ve anonyme",
      startTime: new Date(sessionStart).toISOString(),
      endTime: new Date(now).toISOString(),
      totalTimeSeconds: Math.round((now - sessionStart)/1000),
      questions: boxes.map((box, i)=>{
        const ex = data1[i];
        const picked = box.dataset.picked || null;
        // KO ë¬¸ì¥: fillì´ë©´ (ì„ íƒê°’ì´ ì •ë‹µ ë¦¬ìŠ¤íŠ¸ì— ìˆìœ¼ë©´ ê·¸ê±¸, ì•„ë‹ˆë©´ ì •ë‹µ ì²«ë²ˆì§¸) ë¼ì›Œ ë„£ì–´ ì¬êµ¬ì„±
        let koText = '';
        if(ex.type==='fill'){
          const chosen = (picked && ex.ok.includes(picked)) ? picked : ex.ok[0];
          koText = `${ex.parts[0]} ${chosen} ${ex.parts[1]}`;
        }else{
          koText = ex.ko || '';
        }
        return {
          number: i+1,
          ko: koText,
          fr: ex.fr || '',
          userAnswer: picked,
          isCorrect: box.dataset.correct === '1',
          listenCount: 0,
          hint1Count: 0,
          hint2Count: 0,
          recording: null
        };
      })
    };

    // â–¶ ì„œë²„ ì „ì†¡
    const statusEl = document.getElementById('sendStatus');
    try{
      await sendResults(payload);
      if(statusEl){ statusEl.textContent = "âœ… RÃ©sumÃ© envoyÃ© Ã  l'enseignant(e)."; statusEl.className="text-green-700 mb-4"; }
    }catch(err){
      if(statusEl){ statusEl.textContent = "âš ï¸ Ã‰chec de l'envoi. Un journal d'erreur a Ã©tÃ© transmis."; statusEl.className="text-red-700 mb-4"; }
      await logError('assignments/comme.html','finish/sendResults',err, { total:s1Total, ok:s1Ok });
    }
  });
  </script>
</body>
</html>
