<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Comment dire « Comme » en coréen | 같아요 · 처럼 · 같이 · 같은</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
  <style>
    :root{--ink:#0f172a}
    body{font-family:'Inter','Noto Sans KR',sans-serif;background:#f8fafc;color:var(--ink)}
    .korean{font-family:'Noto Sans KR',sans-serif}
    .card{background:#fff;border-radius:1rem;padding:1.25rem;box-shadow:0 4px 14px rgba(0,0,0,.06);border:1px solid #e5e7eb}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:.6rem 1rem;border-radius:.75rem;font-weight:700;border:2px solid transparent;transition:.2s}
    .btn-gray{background:#f3f4f6;color:#374151;border-color:#e5e7eb}
    .btn-gray:hover{background:#e5e7eb}
    .btn-blue{background:#2563eb;color:#fff}
    .btn-blue:hover{filter:brightness(.95)}
    .tag{font-size:.8rem;border:1px solid #e2e8f0;border-radius:.5rem;padding:.2rem .5rem;background:#f8fafc}
    .choice.correct{border-color:#22c55e;background:#dcfce7;color:#166534}
    .choice.incorrect{border-color:#ef4444;background:#fee2e2;color:#991b1b}
    .exercise{border:1px solid #e5e7eb;border-radius:1rem;padding:1rem;background:#fff}
    .exercise.solved{background:#f0fdf4;border-color:#bbf7d0}
    .feedback{border-radius:.75rem;padding:1rem;margin-top:.75rem}
    .feedback.ok{background:#dcfce7;color:#166534}
    .feedback.no{background:#fee2e2;color:#991b1b}
    .results-enter{animation:pop .25s ease}
    @keyframes pop{from{transform:scale(.98);opacity:0}to{transform:scale(1);opacity:1}}
    .creator{font-size:.85rem;color:#64748b}
  </style>
</head>
<body class="p-4 md:p-8">

  <!-- Top Bar -->
  <div class="max-w-5xl mx-auto mb-4 flex items-center justify-between">
    <div class="creator">
      <span class="font-semibold">made by 성일, Pongdang</span> · <a class="underline" href="mailto:Lapeace29@gmail.com">Lapeace29@gmail.com</a>
    </div>
    <div class="flex gap-2">
      <button onclick="window.print()" class="btn btn-gray" title="Imprimer / 인쇄">🖨️ Imprimer · 인쇄</button>
      <!-- Page d’accueil button intentionally removed -->
    </div>
  </div>

  <main class="max-w-5xl mx-auto space-y-10">
    <!-- Title -->
    <header class="text-center">
      <h1 class="text-4xl md:text-5xl font-black text-indigo-600 mb-2">Comment dire « COMME » en coréen ?</h1>
      <p class="text-slate-600">Règle simple + Exercices (FR·KO). ✨</p>
      <div class="mt-3 flex items-center justify-center gap-2">
        <span class="tag">같아요</span>
        <span class="tag">처럼</span>
        <span class="tag">같이</span>
        <span class="tag">같은</span>
      </div>
    </header>

    <!-- Golden Rule -->
    <section class="card">
      <h2 class="text-2xl font-bold mb-2">La règle d’or 🔑</h2>
      <p class="text-lg">Demande-toi si « comme » touche <b>un verbe (une action)</b> ➜ <span class="korean font-bold">처럼/같이</span>,
        <br class="hidden sm:block"/>ou bien <b>un nom (un objet)</b> ➜ <span class="korean font-bold">같은</span>.
        <br/>Pour une simple identité « être comme », on dit <span class="korean font-bold">같아요</span>.
      </p>
    </section>

    <!-- Explanations -->
    <section class="grid md:grid-cols-2 gap-6">
      <div class="card">
        <h3 class="text-2xl font-bold text-cyan-600 korean mb-2">같아요</h3>
        <p class="text-slate-600 mb-3">« être comme » — comparaison simple.</p>
        <div class="bg-cyan-50 border border-cyan-100 rounded-xl p-3">
          <p class="text-sm text-slate-600">« Elle est comme un ange. »</p>
          <p class="korean text-xl font-bold text-cyan-700">→ 천사 같아요.</p>
        </div>
        <!-- 추가 설명/주의 -->
        <p class="text-slate-600 mt-2">
          « <b>être comme</b> » — comparaison simple. <br>
          👉 ON compare <b>Nom1 (elle)</b> avec un <b>nom2 (ange)</b>.
        </p>
        <div class="mt-3 bg-amber-50 border border-amber-200 rounded-xl p-3">
          <p class="font-bold text-amber-800">⚠️ Attention</p>
          <p class="text-slate-700 mt-1">
            « Il est rapide comme un éclair » → <b>être + comme ?</b> <span class="korean">처럼</span> ?! <b>Non</b> !
            Il y a un adjectif « rapide » et en coréen les adjectifs viennent d’un verbe → on utilise
            <span class="korean font-semibold">처럼 / 같이</span>.
          </p>
          <p class="korean text-lg font-bold mt-1">그 사람은 번개처럼 빨라요.</p>
        </div>
      </div>
      <div class="card">
        <h3 class="text-2xl font-bold text-orange-600 korean mb-2">처럼 / 같이</h3>
        <p class="text-slate-600 mb-3">décrit la <b>manière</b> d’une action (verbe). Souvent interchangeables.</p>
        <div class="bg-orange-50 border border-orange-100 rounded-xl p-3 mb-3">
          <p class="text-sm text-slate-600">« Je mange comme une vache. »</p>
          <p class="korean text-xl font-bold text-orange-700">→ 소처럼 먹어요 / 소같이 먹어요.</p>
        </div>
        <div class="bg-red-50 border border-red-200 rounded-xl p-3">
          <p class="font-bold text-red-700">⚠️ <span class="korean">같이</span> = « ensemble » aussi.</p>
          <p class="text-sm text-slate-600 mt-1">« Je suis allé avec mon ami. »</p>
          <p class="korean font-bold text-red-800">→ 친구랑 같이 갔어요. (✔)</p>
          <p class="korean text-slate-500 line-through">→ 친구처럼 갔어요. (✘)</p>
        </div>
      </div>
      <div class="card md:col-span-2">
        <h3 class="text-2xl font-bold text-violet-600 korean mb-2">같은</h3>
        <p class="text-slate-600 mb-3">décrit un <b>nom</b> : « qui est comme … »</p>
        <div class="bg-violet-50 border border-violet-100 rounded-xl p-3">
          <p class="text-sm text-slate-600">« C’est une amie comme ma famille. »</p>
          <p class="korean text-xl font-bold text-violet-700">→ 가족 같은 친구예요.</p>
          <p class="text-xs italic text-slate-500 mt-1">(Une amie qui est comme ma famille)</p>
        </div>
      </div>
      <div class="card md:col-span-2">
        <h3 class="text-xl font-bold mb-2">« Danse » : nom vs manière</h3>
        <div class="grid sm:grid-cols-2 gap-4">
          <div class="bg-blue-50 p-3 rounded-xl">
            <p class="korean font-bold text-blue-800">별 같은 춤</p>
            <p class="text-sm text-blue-800">같은 → nom « 춤 » : « une danse <b>qui est comme</b> une étoile »</p>
          </div>
          <div class="bg-green-50 p-3 rounded-xl">
            <p class="korean font-bold text-green-800">별 같이 춤을 춰요</p>
            <p class="text-sm text-green-800">같이 → verbe « 춤을 춰요 » : « danser <b>à la manière</b> d’une étoile »</p>
          </div>
        </div>
      </div>
    </section>

    <!-- SUMMARY TABLE -->
    <section class="card">
      <h2 class="text-2xl font-bold mb-3">En résumé 📝</h2>
      <div class="overflow-x-auto">
        <table class="w-full text-left text-sm">
          <thead class="bg-slate-100">
            <tr>
              <th class="p-3">Phrase FR</th>
              <th class="p-3">Verbe / Nom</th>
              <th class="p-3">Coréen</th>
              <th class="p-3">Note</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-b">
              <td class="p-3">Je mange comme une vache</td>
              <td class="p-3 text-orange-600 font-semibold">Verbe</td>
              <td class="p-3 korean">소처럼 / 소같이 먹어요</td>
              <td class="p-3">manière (verbe)</td>
            </tr>
            <tr class="border-b bg-slate-50">
              <td class="p-3">Une amie comme ma famille</td>
              <td class="p-3 text-violet-600 font-semibold">Nom</td>
              <td class="p-3 korean">가족 같은 친구예요</td>
              <td class="p-3">type de nom</td>
            </tr>
            <tr class="border-b">
              <td class="p-3">Elle est comme un ange</td>
              <td class="p-3 text-cyan-600 font-semibold">Être comme</td>
              <td class="p-3 korean">천사 같아요</td>
              <td class="p-3">identité</td>
            </tr>
            <tr>
              <td class="p-3">Je vais avec mon ami</td>
              <td class="p-3 text-red-600 font-semibold">« Ensemble »</td>
              <td class="p-3 korean">친구랑 같이 갔어요</td>
              <td class="p-3">같이 = ensemble</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- EXERCISES SET 1 (only) -->
    <section id="set1" class="space-y-4">
      <div class="flex items-center justify-between">
        <h2 class="text-3xl font-bold">연습문제 · Exercices — <span class="text-slate-500">choix immédiat</span></h2>
        <button id="reset1" class="btn btn-gray">Recommencer</button>
      </div>
      <div id="list1" class="space-y-3"></div>
    </section>

    <!-- Finish -->
    <section class="flex flex-col items-center gap-3 pt-4">
      <button id="finishBtn" class="btn btn-blue text-lg px-6">Terminer · 끝내기</button>
      <p class="text-sm text-slate-500">Vous verrez votre score et la correction détaillée. / 점수와 해설을 볼 수 있어요.</p>
      <div id="results" class="hidden results-enter w-full"></div>
    </section>

    <!-- Footer Nav -->
    <footer class="pt-10">
      <div class="flex items-center justify-between">
        <a href="../index.html" class="btn btn-gray">⟵ Exercices précédents / 이전 연습으로</a>
        <button onclick="window.print()" class="btn btn-gray">🖨️ Imprimer / 인쇄</button>
      </div>
      <div class="creator mt-6 text-center">
        <span class="font-semibold">made by 성일, Pongdang</span> · <a class="underline" href="mailto:Lapeace29@gmail.com">Lapeace29@gmail.com</a>
      </div>
    </footer>
  </main>

  <script>
  // --------------------------
  // Dataset (SET 1 only; FR↔KO 보조정보 포함)
  // --------------------------
  const data1 = [
    // ——— 같아요 (Être comme)
    { type:'id',
      fr:"Ce bébé est comme un ange.",
      ans:"etre",
      exp:"Simple comparaison d'identité (« être comme »).",
      ko:"이 아기는 천사 같아요.",
      vocab:[{fr:"bébé",ko:"아기"},{fr:"ange",ko:"천사"}]
    },
    { type:'id',
      fr:"Le temps est comme de l'or.",
      ans:"etre",
      exp:"Identité : le temps EST comme l'or.",
      ko:"시간은 금 같아요.",
      vocab:[{fr:"temps",ko:"시간"},{fr:"or",ko:"금"}]
    },
    { type:'fill',
      parts:["이건 꿈", "."],
      ok:["같아요"],
      exp:"« Ceci est comme un rêve. »",
      frTrans:"Ceci est comme un rêve.",
      vocab:[{fr:"ceci",ko:"이것"},{fr:"rêve",ko:"꿈"}]
    },
    { type:'fill',
      parts:["오늘은 어제", "."],
      ok:["같아요"],
      exp:"« Aujourd'hui est comme hier. »",
      frTrans:"Aujourd’hui est comme hier.",
      vocab:[{fr:"aujourd’hui",ko:"오늘"},{fr:"hier",ko:"어제"}]
    },

    // ——— 같은 (Nom)
    { type:'id',
      fr:"C'est un homme comme un lion.",
      ans:"nom",
      exp:"« Comme » décrit le nom ‘homme’.",
      ko:"사자 같은 남자예요.",
      vocab:[{fr:"homme",ko:"남자"},{fr:"lion",ko:"사자"}]
    },
    { type:'id',
      fr:"Je cherche une maison comme un château.",
      ans:"nom",
      exp:"Décrit le nom ‘maison’.",
      ko:"성 같은 집을 찾아요.",
      vocab:[{fr:"maison",ko:"집"},{fr:"château",ko:"성"}]
    },
    { type:'id',
      fr:"C'est un cadeau comme un trésor.",
      ans:"nom",
      exp:"Décrit le nom ‘cadeau’.",
      ko:"보물 같은 선물이에요.",
      vocab:[{fr:"cadeau",ko:"선물"},{fr:"trésor",ko:"보물"}]
    },
    { type:'id',
      fr:"J'ai un ami comme un frère.",
      ans:"nom",
      exp:"Décrit le nom ‘ami’.",
      ko:"형제 같은 친구가 있어요.",
      vocab:[{fr:"ami",ko:"친구"},{fr:"frère",ko:"형제"}]
    },
    { type:'fill',
      parts:["천사", " 아기예요."],
      ok:["같은"],
      exp:"On décrit le nom ‘아기’.",
      frTrans:"C’est un bébé comme un ange.",
      vocab:[{fr:"bébé",ko:"아기"},{fr:"ange",ko:"천사"}]
    },
    { type:'fill',
      parts:["바다", " 넓은 마음"],
      ok:["같은"],
      exp:"On décrit le nom ‘마음’.",
      frTrans:"Un cœur large comme la mer.",
      vocab:[{fr:"mer",ko:"바다"},{fr:"cœur",ko:"마음"}]
    },
    { type:'fill',
      parts:["그녀는 여우", " 여자예요."],
      ok:["같은"],
      exp:"On décrit le nom ‘여자’.",
      frTrans:"C’est une femme comme un renard.",
      vocab:[{fr:"femme",ko:"여자"},{fr:"renard",ko:"여우"}]
    },

    // ——— 처럼/같이 (Verbe)
    { type:'id',
      fr:"Il court comme le vent.",
      ans:"verbe",
      exp:"« Comme » décrit l’action courir.",
      ko:"그는 바람처럼 달려요.",
      vocab:[{fr:"courir",ko:"달리다"},{fr:"vent",ko:"바람"}]
    },
    { type:'id',
      fr:"Elle chante comme une sirène.",
      ans:"verbe",
      exp:"« Comme » décrit la manière de chanter.",
      ko:"그녀는 인어처럼 노래해요.",
      vocab:[{fr:"chanter",ko:"노래하다"},{fr:"sirène",ko:"인어"}]
    },
    { type:'id',
      fr:"Il danse comme un professionnel.",
      ans:"verbe",
      exp:"« Comme » décrit la manière de danser.",
      ko:"그는 전문가처럼 춤을 춰요.",
      vocab:[{fr:"danser",ko:"춤추다"},{fr:"professionnel",ko:"전문가"}]
    },
    { type:'id',
      fr:"Elle parle comme un poète.",
      ans:"verbe",
      exp:"« Comme » décrit la manière de parler.",
      ko:"그녀는 시인처럼 말해요.",
      vocab:[{fr:"parler",ko:"말하다"},{fr:"poète",ko:"시인"}]
    },
    { type:'fill',
      parts:["그는 바람", " 달려요."],
      ok:["처럼","같이"],
      exp:"Manière de courir.",
      frTrans:"Il court comme le vent.",
      vocab:[{fr:"courir",ko:"달리다"},{fr:"vent",ko:"바람"}]
    },
    { type:'fill',
      parts:["우리 아빠는 곰", " 자요."],
      ok:["처럼","같이"],
      exp:"Manière de dormir.",
      frTrans:"Mon père dort comme un ours.",
      vocab:[{fr:"dormir",ko:"자다"},{fr:"ours",ko:"곰"}]
    },
    { type:'fill',
      parts:["가수", " 노래를 잘해요."],
      ok:["처럼","같이"],
      exp:"Manière de chanter.",
      frTrans:"Il/Elle chante comme un chanteur.",
      vocab:[{fr:"chanteur",ko:"가수"},{fr:"chanter",ko:"노래하다"}]
    },
    { type:'fill',
      parts:["아기가 어른", " 말해요."],
      ok:["처럼","같이"],
      exp:"Manière de parler.",
      frTrans:"Le bébé parle comme un adulte.",
      vocab:[{fr:"bébé",ko:"아기"},{fr:"adulte",ko:"어른"}]
    },
    { type:'fill',
      parts:["그는 로봇", " 걸어요."],
      ok:["처럼","같이"],
      exp:"Manière de marcher.",
      frTrans:"Il marche comme un robot.",
      vocab:[{fr:"marcher",ko:"걷다"},{fr:"robot",ko:"로봇"}]
    }
  ];

  // Render helpers
  const list1 = document.getElementById('list1');
  // (추가) 시작 시각 기록 – 전송 payload의 totalTimeSeconds 계산용
  const sessionStart = Date.now();

  function renderSet1(){
    list1.innerHTML='';
    data1.forEach((ex,i)=>{
      const wrap=document.createElement('div');
      wrap.className='exercise';
      wrap.id=`s1-${i}`;
      let inner=`
        <div class="flex items-start gap-3">
          <div class="text-xl font-bold text-blue-500">${i+1}.</div>
          <div class="flex-1">
      `;
      if(ex.type==='id'){
        inner+=`
          <p class="text-slate-700 mb-3">Quel est le type de la phrase ?</p>
          <p class="font-semibold text-lg mb-1">« ${ex.fr} »</p>
          <p class="korean text-sky-700 mb-2">${ex.ko}</p>
          <ul class="list-disc list-inside text-sm text-slate-600 mb-3">
            ${ex.vocab.map(v=>`<li>${v.fr} → <span class="korean">${v.ko}</span></li>`).join('')}
          </ul>
          <div class="flex flex-wrap gap-2">
            <button class="btn btn-gray choice" data-a="verbe">Action (Verbe) 🏃‍♂️</button>
            <button class="btn btn-gray choice" data-a="nom">Objet (Nom) ✍️</button>
            <button class="btn btn-gray choice" data-a="etre">Identification (Être comme) 🙋‍♀️</button>
          </div>
          <p class="hidden mt-3 text-sm text-slate-600 exp">Explication : ${ex.exp}</p>
        `;
      }else{
        const opts=["같아요","처럼","같이","같은"].map(o=>`<button class="btn btn-gray choice korean" data-a="${o}">${o}</button>`).join('');
        inner+=`
          <p class="text-slate-700 mb-2">Complète la phrase :</p>
          <p class="korean text-2xl font-semibold mb-2">${ex.parts[0]} <span class="inline-block bg-slate-200 rounded-md w-24 h-8 align-middle"></span> ${ex.parts[1]}</p>
          <p class="text-sm text-rose-700 mb-2">FR: ${ex.frTrans}</p>
          <ul class="list-disc list-inside text-sm text-slate-600 mb-3">
            ${ex.vocab.map(v=>`<li>${v.fr} → <span class="korean">${v.ko}</span></li>`).join('')}
          </ul>
          <div class="flex flex-wrap gap-2">${opts}</div>
          <p class="hidden mt-3 text-sm text-slate-600 exp">Explication : ${ex.exp}</p>
        `;
      }
      inner+=`</div></div>`;
      wrap.innerHTML=inner;
      list1.appendChild(wrap);
    });

    // events
    list1.querySelectorAll('.exercise').forEach((box,idx)=>{
      const ex=data1[idx];
      box.querySelectorAll('.choice').forEach(btn=>{
        btn.addEventListener('click',()=>{
          const picked=btn.dataset.a;
          const ok = ex.type==='id' ? (picked===ex.ans) : ex.ok.includes(picked);
          // disable all
          box.querySelectorAll('.choice').forEach(b=>b.disabled=true);
          // mark
          if(ok){ btn.classList.add('correct'); box.classList.add('solved'); }
          else{
            btn.classList.add('incorrect');
            // show correct
            box.querySelectorAll('.choice').forEach(b=>{
              const isOk = ex.type==='id' ? (b.dataset.a===ex.ans) : ex.ok.includes(b.dataset.a);
              if(isOk) b.classList.add('correct');
            });
          }
          box.querySelector('.exp').classList.remove('hidden');
          // store
          box.dataset.correct = ok ? '1' : '0';
          box.dataset.picked = picked;   // << 추가: 전송용 선택값 저장 (UI 변화 없음)
        });
      });
    });
  }

  // Reset
  document.getElementById('reset1').addEventListener('click', renderSet1);

  // Initial render
  renderSet1();

  // ---------- 전송 유틸 (UI 변경 없음) ----------
  async function sendResults(payload){
    const res = await fetch('/.netlify/functions/send-results', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify(payload)
    });
    if(!res.ok) throw new Error(`send-results HTTP ${res.status}`);
    return res.json().catch(()=>({ok:true}));
  }
  async function logError(where, step, err, extra){
    try{
      await fetch('/.netlify/functions/log-error',{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ where, step, message:String(err), extra })
      });
    }catch(_){}
  }

  // --------------------------
  // Finish & Results (SET 1 only) + 선생님 전송
  // --------------------------
  document.getElementById('finishBtn').addEventListener('click', async ()=>{
    const s1Total = data1.length;
    let s1Ok = 0;
    const boxes = Array.from(document.querySelectorAll('#list1 .exercise'));
    boxes.forEach((box)=>{ s1Ok += (box.dataset.correct==='1') ? 1 : 0; });

    const res = document.getElementById('results');
    res.classList.remove('hidden');
    res.innerHTML = `
      <div class="card">
        <h3 class="text-2xl font-bold mb-2">📊 Résultats / 결과</h3>
        <p class="text-lg mb-2">Score : <b>${s1Ok} / ${s1Total}</b></p>
        <p id="sendStatus" class="text-sm text-slate-500 mb-4">Envoi au professeur…</p>
        <details class="mt-2">
          <summary class="cursor-pointer text-slate-700">Voir la correction</summary>
          <ol class="list-decimal list-inside mt-2 space-y-1 text-sm">
            ${data1.map(ex=>{
              if(ex.type==='id'){
                return `<li>« ${ex.fr} » → <b>${ex.ans}</b>
                  <span class="block text-slate-500">${ex.exp}</span>
                  <span class="block korean text-sky-700">${ex.ko}</span></li>`;
              }else{
                return `<li class="korean">${ex.parts[0]} <b>${ex.ok.join(' / ')}</b> ${ex.parts[1]}
                  <span class="block text-slate-500">${ex.exp}</span>
                  <span class="block text-rose-700">FR: ${ex.frTrans}</span></li>`;
              }
            }).join('')}
          </ol>
        </details>
        <div class="mt-4 flex flex-wrap gap-2">
          <button class="btn btn-gray" onclick="window.scrollTo({top:0,behavior:'smooth'})">Revoir la leçon</button>
          <button class="btn btn-gray" onclick="location.reload()">다시하기 · Recommencer</button>
        </div>
      </div>
    `;

    // ▶ 전송 payload 구성 (프로젝트 규격)
    const now = Date.now();
    const payload = {
      studentName: window.prompt("Nom de l'élève / 학생 이름 ?", "")?.trim() || "Élève anonyme",
      startTime: new Date(sessionStart).toISOString(),
      endTime: new Date(now).toISOString(),
      totalTimeSeconds: Math.round((now - sessionStart)/1000),
      questions: boxes.map((box, i)=>{
        const ex = data1[i];
        const picked = box.dataset.picked || null;
        // KO 문장: fill이면 (선택값이 정답 리스트에 있으면 그걸, 아니면 정답 첫번째) 끼워 넣어 재구성
        let koText = '';
        if(ex.type==='fill'){
          const chosen = (picked && ex.ok.includes(picked)) ? picked : ex.ok[0];
          koText = `${ex.parts[0]} ${chosen} ${ex.parts[1]}`;
        }else{
          koText = ex.ko || '';
        }
        return {
          number: i+1,
          ko: koText,
          fr: ex.fr || '',
          userAnswer: picked,
          isCorrect: box.dataset.correct === '1',
          listenCount: 0,
          hint1Count: 0,
          hint2Count: 0,
          recording: null
        };
      })
    };

    // ▶ 서버 전송
    const statusEl = document.getElementById('sendStatus');
    try{
      await sendResults(payload);
      if(statusEl){ statusEl.textContent = "✅ Résumé envoyé à l'enseignant(e)."; statusEl.className="text-green-700 mb-4"; }
    }catch(err){
      if(statusEl){ statusEl.textContent = "⚠️ Échec de l'envoi. Un journal d'erreur a été transmis."; statusEl.className="text-red-700 mb-4"; }
      await logError('assignments/comme.html','finish/sendResults',err, { total:s1Total, ok:s1Ok });
    }
  });
  </script>
</body>
</html>
