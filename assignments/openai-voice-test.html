<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Exercice de DictÃ©e : Comme en CorÃ©en</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body{font-family:'Inter',sans-serif;background:#f3f4f6}
    .korean-font{font-family:'Gowun Dodum',sans-serif}
    .card{background:#fff;border-radius:1rem;padding:1.5rem;box-shadow:0 4px 6px -1px rgb(0 0 0 / .1),0 2px 4px -2px rgb(0 0 0 / .1)}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:.6rem 1.2rem;border-radius:.75rem;font-weight:600;text-align:center;cursor:pointer;transition:all .2s;border:none}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .btn-primary{background:#3b82f6;color:#fff}.btn-primary:hover:not(:disabled){background:#2563eb}
    .btn-secondary{background:#e5e7eb;color:#374151}.btn-secondary:hover:not(:disabled){background:#d1d5db}
    .btn-hint{background:#fefce8;color:#a16207;padding:.4rem .8rem;font-size:.875rem;border:1px solid #fde047}.btn-hint:hover:not(:disabled){background:#fef08a}
    .dictation-card{padding:1.5rem;border:1px solid #e5e7eb;border-radius:1rem;margin-bottom:1.5rem;background:#fff}
    .feedback{padding:1rem;border-radius:.75rem;margin-top:1rem;font-size:.95rem}
    .feedback.correct{background:#dcfce7;color:#166534;border:1px solid #86efac}
    .feedback.incorrect{background:#fee2e2;color:#991b1b;border:1px solid #fca5a5}
    .small-muted{font-size:.875rem;color:#6b7280}
    .made-by-top,.made-by-bottom{text-align:center}
    .pill{display:inline-block;border-radius:9999px;padding:.25rem .6rem;font-size:.8rem}
    .pill-green{background:#e7f8ee;color:#0a7a3b;border:1px solid #9be4b8}
    .pill-red{background:#fde8e8;color:#9b1c1c;border:1px solid #f7b4b4}
    .row-gap{row-gap:.5rem}
    .spinner{width:18px;height:18px;border:3px solid #fff;border-top-color:transparent;border-radius:50%;animation:spin .8s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    @media print {.no-print{display:none!important}}
    .btn-rec-recording{ background:#ef4444 !important; color:#fff !important; }
    .dot-rec{ width:10px;height:10px;border-radius:9999px;background:#ef4444;display:inline-block;animation:blink 1s infinite; }
    @keyframes blink { 50%{ opacity:.2 } }
  </style>
</head>
<body class="text-slate-800">
  <div class="container mx-auto p-4 md:p-8 max-w-3xl">
    <header class="text-center mb-8">
      <h1 class="text-4xl md:text-5xl font-bold text-indigo-600 mb-2">DictÃ©e : Comme en CorÃ©en ğŸ§</h1>
      <p class="text-lg text-slate-600">Ã‰coutez â†’ Ã‰crivez en corÃ©en â†’ Traduisez en franÃ§ais â†’ Enregistrez votre prononciation.</p>
      <div class="mt-4 flex flex-wrap items-center justify-center gap-3 no-print">
        <button type="button" class="btn btn-secondary" onclick="window.print()" aria-label="Imprimer la page">ğŸ–¨ï¸ Imprimer / í˜ì´ì§€ ì¸ì‡„</button>
      </div>
      <div class="made-by-top mt-3 text-sm text-slate-500">
        made by <b>ì„±ì¼, Pongdang</b> Â· <a href="mailto:Lapeace29@gmail.com" class="underline">Lapeace29@gmail.com</a>
      </div>
    </header>

    <section class="card mb-8 no-print">
      <label class="block font-semibold mb-2">Nom de l'Ã©tudiant / í•™ìƒ ì´ë¦„</label>
      <input id="student-name" type="text" class="w-full p-3 border-2 rounded-lg focus:border-indigo-500"
             placeholder="Ex. Camille, NoÃ©, ChloÃ©..." />
      <p class="small-muted mt-2">
        DÃ¨s le dÃ©but, nous enregistrons : votre nom, le nombre dâ€™Ã©coutes/indices/essais, et vos scores de prononciation.
        / ì‹œì‘í•˜ë©´ ì´ë¦„, ë“£ê¸°Â·íŒíŠ¸Â·ì‹œë„ íšŸìˆ˜, ë°œìŒ ì ìˆ˜ê¹Œì§€ ê¸°ë¡ë¼ìš”.
      </p>
    </section>

    <section id="explanations" class="mb-10 card">
      <h2 class="text-2xl font-bold mb-3 text-slate-700">Rappel : La RÃ¨gle d'Or ğŸ”‘</h2>
      <div class="space-y-2 text-slate-700">
        <p>ğŸ™‹â€â™€ï¸ <strong class="korean-font text-green-600">ê°™ì•„ìš”</strong> : â€œ~ì™€/ê³¼ ê°™ë‹¤â€ (ê°„ë‹¨ ë¹„êµ).</p>
        <p>âœï¸ <strong class="korean-font text-purple-600">ê°™ì€</strong> : ëª…ì‚¬ ìˆ˜ì‹(â€œ~ê°™ì€ + ëª…ì‚¬â€).</p>
        <p>ğŸƒâ€â™‚ï¸ <strong class="korean-font text-blue-600">ì²˜ëŸ¼ / ê°™ì´</strong> : ë™ì‘ ë¹„êµ(ë™ì‚¬ì™€ í•¨ê»˜). <span class="small-muted">ê°™ì´ëŠ” â€˜í•¨ê»˜â€™ ì˜ë¯¸ë„ ìˆì–´ìš”.</span></p>
      </div>
    </section>

    <section id="dictation-exercises"></section>

    <section class="mt-8 flex flex-wrap items-center gap-3 no-print">
      <button type="button" class="btn btn-secondary" id="restart-btn">â†º RÃ©essayer / ë‹¤ì‹œí•˜ê¸°</button>
      <button type="button" class="btn btn-primary" id="finish-btn">âœ… Terminer / ëë‚´ê¸°</button>
    </section>

    <div class="made-by-bottom mt-6 text-sm text-slate-500">
      made by <b>ì„±ì¼, Pongdang</b> Â· <a href="mailto:Lapeace29@gmail.com" class="underline">Lapeace29@gmail.com</a>
    </div>
  </div>

  <!-- ê³µìš© ë°œìŒ ëª¨ë“ˆ -->
  <script src="/assets/pronun-client.js"></script>

  <script>
    const exercises = [
      { sentence: "ì²œì‚¬ ê°™ì•„ìš”.", translation: "Elle est comme un ange.", hint1: "ã…Šã…… ã„±ã…‡ã…‡", hint2: "ì²œì‚¬ = ange", voice: "Kore" },
      { sentence: "ì´ê±´ ê¿ˆ ê°™ì•„ìš”.", translation: "Ceci est comme un rÃªve.", hint1: "ã…‡ã„± ã„² ã„±ã…‡ã…‡", hint2: "ê¿ˆ = rÃªve", voice: "Puck" },
      { sentence: "ê°€ì¡± ê°™ì€ ì¹œêµ¬ì˜ˆìš”.", translation: "C'est une amie comme ma famille.", hint1: "ã„±ã…ˆ ã„±ã…‡ ã…Šã„±ã…‡ã…‡", hint2: "ê°€ì¡± = famille", voice: "Charon" },
      { sentence: "ë°”ë‹¤ ê°™ì€ ë„“ì€ ë§ˆìŒ.", translation: "Un coeur large comme la mer.", hint1: "ã…‚ã„· ã„±ã…‡ ã„´ã…‡ ã…ã…‡", hint2: "ë°”ë‹¤ = mer, ë„“ì€ = large", voice: "alloy" },
      { sentence: "ì†Œì²˜ëŸ¼ ë¨¹ì–´ìš”.", translation: "Il/Elle mange comme une vache.", hint1: "ã……ã…Šã„¹ ã…ã…‡ã…‡", hint2: "ì†Œ = vache", voice: "Fenrir" },
      { sentence: "ê·¸ ì‚¬ëŒì€ ë°”ëŒì²˜ëŸ¼ ë‹¬ë ¤ìš”.", translation: "Il court comme le vent.", hint1: "ã„±ã„´ ã…‚ã„¹ã…Šã„¹ ã„·ã„¹ã…‡", hint2: "ë°”ëŒ = vent", voice: "Orus" },
      { sentence: "ê°€ìˆ˜ê°™ì´ ë…¸ë˜ë¥¼ ì˜í•´ìš”.", translation: "Il/Elle chante bien comme un(e) chanteur(se).", hint1: "ã„±ã……ã„±ã…‡ ã„´ã„¹ã„¹ ã…ˆã…ã…‡", hint2: "ê°€ìˆ˜ = chanteur/chanteuse", voice: "Aoede" },
      { sentence: "ë¡œë´‡ê°™ì´ ê±¸ì–´ìš”.", translation: "Il/Elle marche comme un robot.", hint1: "ã„¹ã…‚ã„±ã…‡ ã„±ã…‡ã…‡", hint2: "ë¡œë´‡
