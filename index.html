<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercices d'Ã©coute en CorÃ©en (20 Questions)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', 'Noto Sans KR', sans-serif;
            background-color: #f0f2f5;
        }
        .audio-btn {
            transition: all 0.3s ease;
        }
        .audio-btn:hover {
            transform: scale(1.1);
            background-color: #4a5568;
        }
        .audio-btn.loading {
            cursor: not-allowed;
            background-color: #a0aec0;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        .answer-box {
            transition: max-height 0.5s ease-in-out, opacity 0.5s ease-in-out;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
        }
        .answer-box.show {
            max-height: 150px;
            opacity: 1;
        }
        .particle-btn {
            transition: all 0.2s ease;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 p-4 md:p-8">

    <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-6 md:p-8">
        <header class="text-center mb-8 border-b pb-4">
            <h1 class="text-3xl md:text-4xl font-bold text-indigo-600">Exercices d'Ã©coute en CorÃ©en (ë“£ê¸° ì—°ìŠµ)</h1>
            <p class="text-gray-600 mt-2">Ã‰coutez attentivement et rÃ©solvez les 20 exercices pour maÃ®triser la grammaire et le vocabulaire.</p>
        </header>

        <!-- Exercice 1: ComplÃ©tez la phrase -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-4 text-gray-700 border-l-4 border-indigo-500 pl-4">Exercice 1 : ComplÃ©tez la phrase (ë¹ˆì¹¸ ì±„ìš°ê¸°)</h2>
            <div class="space-y-6">
                <!-- Q1 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">1. Ã‰coutez et complÃ©tez la question.</p>
                    <div class="flex items-center space-x-4">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="í”„ë‘ìŠ¤ ì‚¬ëŒë“¤ì€ ë­ë¥¼ ìì£¼ ë¨¹ì–´ìš”?">ğŸ”Š</button>
                        <p class="text-xl font-medium">í”„ë‘ìŠ¤ ì‚¬ëŒë“¤ì€ <input type="text" id="q1_input" class="border-b-2 border-gray-300 focus:border-indigo-500 outline-none w-24 text-center bg-transparent"> ìì£¼ ë¨¹ì–´ìš”?</p>
                    </div>
                    <div class="mt-4 text-right"><button onclick="toggleAnswer('q1_answer')" class="bg-indigo-500 text-white py-1 px-4 rounded-md hover:bg-indigo-600 transition">RÃ©ponse</button></div>
                    <div id="q1_answer" class="answer-box mt-3 p-3 bg-indigo-100 text-indigo-800 rounded-lg"><strong>RÃ©ponse :</strong> ë­ë¥¼ (ou ë­˜)<br><strong>Phrase :</strong> í”„ë‘ìŠ¤ ì‚¬ëŒë“¤ì€ ë­ë¥¼[ë­˜] ìì£¼ ë¨¹ì–´ìš”?</div>
                </div>
                <!-- Q2 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">2. Ã‰coutez et complÃ©tez la phrase nÃ©gative.</p>
                    <div class="flex items-center space-x-4">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="ì €ëŠ” ì¹œêµ¬ë¥¼ ì•ˆ ë§Œë‚¬ì–´ìš”.">ğŸ”Š</button>
                        <p class="text-xl font-medium">ì €ëŠ” ì¹œêµ¬ë¥¼ <input type="text" id="q2_input" class="border-b-2 border-gray-300 focus:border-indigo-500 outline-none w-32 text-center bg-transparent">.</p>
                    </div>
                    <div class="mt-4 text-right"><button onclick="toggleAnswer('q2_answer')" class="bg-indigo-500 text-white py-1 px-4 rounded-md hover:bg-indigo-600 transition">RÃ©ponse</button></div>
                    <div id="q2_answer" class="answer-box mt-3 p-3 bg-indigo-100 text-indigo-800 rounded-lg"><strong>RÃ©ponse :</strong> ì•ˆ ë§Œë‚¬ì–´ìš”<br><strong>Phrase :</strong> ì €ëŠ” ì¹œêµ¬ë¥¼ ì•ˆ ë§Œë‚¬ì–´ìš”.</div>
                </div>
                <!-- Q3 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">3. Ã‰coutez et complÃ©tez avec le nom.</p>
                    <div class="flex items-center space-x-4">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="ì €ëŠ” ìŒ€ì„ ìì£¼ ë¨¹ì–´ìš”.">ğŸ”Š</button>
                        <p class="text-xl font-medium">ì €ëŠ” <input type="text" id="q3_input" class="border-b-2 border-gray-300 focus:border-indigo-500 outline-none w-16 text-center bg-transparent">ì„ ìì£¼ ë¨¹ì–´ìš”.</p>
                    </div>
                    <div class="mt-4 text-right"><button onclick="toggleAnswer('q3_answer')" class="bg-indigo-500 text-white py-1 px-4 rounded-md hover:bg-indigo-600 transition">RÃ©ponse</button></div>
                    <div id="q3_answer" class="answer-box mt-3 p-3 bg-indigo-100 text-indigo-800 rounded-lg"><strong>RÃ©ponse :</strong> ìŒ€<br><strong>Phrase :</strong> ì €ëŠ” ìŒ€ì„ ìì£¼ ë¨¹ì–´ìš”. (Je mange souvent du riz.)</div>
                </div>
                <!-- Q4 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">4. Ã‰coutez et complÃ©tez avec l'adverbe.</p>
                    <div class="flex items-center space-x-4">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="í•œêµ­ ì‚¬ëŒë“¤ì€ ê¹€ì¹˜ì°Œê°œë¥¼ ìì£¼ ë¨¹ì–´ìš”.">ğŸ”Š</button>
                        <p class="text-xl font-medium">í•œêµ­ ì‚¬ëŒë“¤ì€ ê¹€ì¹˜ì°Œê°œë¥¼ <input type="text" id="q4_input" class="border-b-2 border-gray-300 focus:border-indigo-500 outline-none w-20 text-center bg-transparent"> ë¨¹ì–´ìš”.</p>
                    </div>
                    <div class="mt-4 text-right"><button onclick="toggleAnswer('q4_answer')" class="bg-indigo-500 text-white py-1 px-4 rounded-md hover:bg-indigo-600 transition">RÃ©ponse</button></div>
                    <div id="q4_answer" class="answer-box mt-3 p-3 bg-indigo-100 text-indigo-800 rounded-lg"><strong>RÃ©ponse :</strong> ìì£¼<br><strong>Phrase :</strong> í•œêµ­ ì‚¬ëŒë“¤ì€ ê¹€ì¹˜ì°Œê°œë¥¼ ìì£¼ ë¨¹ì–´ìš”. (Les CorÃ©ens mangent souvent du Kimchi-jjigae.)</div>
                </div>
                <!-- Q5 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">5. Ã‰coutez et complÃ©tez avec le verbe.</p>
                    <div class="flex items-center space-x-4">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="ì €ëŠ” ì‹ë‹¹ì— ë“¤ì–´ê°€ìš”.">ğŸ”Š</button>
                        <p class="text-xl font-medium">ì €ëŠ” ì‹ë‹¹ì— <input type="text" id="q5_input" class="border-b-2 border-gray-300 focus:border-indigo-500 outline-none w-28 text-center bg-transparent">.</p>
                    </div>
                    <div class="mt-4 text-right"><button onclick="toggleAnswer('q5_answer')" class="bg-indigo-500 text-white py-1 px-4 rounded-md hover:bg-indigo-600 transition">RÃ©ponse</button></div>
                    <div id="q5_answer" class="answer-box mt-3 p-3 bg-indigo-100 text-indigo-800 rounded-lg"><strong>RÃ©ponse :</strong> ë“¤ì–´ê°€ìš”<br><strong>Phrase :</strong> ì €ëŠ” ì‹ë‹¹ì— ë“¤ì–´ê°€ìš”. (J'entre dans le restaurant.)</div>
                </div>
            </div>
        </section>

        <!-- Exercice 2: Choisissez la bonne particule -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-4 text-gray-700 border-l-4 border-cyan-500 pl-4">Exercice 2 : Choisissez la bonne particule (ì¡°ì‚¬ ì„ íƒí•˜ê¸°)</h2>
            <div class="space-y-6">
                <!-- Q6 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">6. Ã‰coutez et choisissez la particule pour "et".</p>
                    <div class="flex items-center space-x-4">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="ê¹€ì¹˜ì™€ ë¼ì§€ê³ ê¸°ê°€ ë“¤ì–´ê°€ìš”.">ğŸ”Š</button>
                        <p class="text-xl font-medium">ê¹€ì¹˜<span id="q6_blank" class="font-bold text-cyan-600">__</span> ë¼ì§€ê³ ê¸°ê°€ ë“¤ì–´ê°€ìš”.</p>
                    </div>
                    <div class="flex space-x-4 mt-4" id="q6_options"><button onclick="checkParticle('q6', 'ì™€', true)" class="particle-btn flex-1 bg-gray-200 hover:bg-cyan-200 text-gray-800 font-bold py-2 px-4 rounded">ì™€</button><button onclick="checkParticle('q6', 'ê³¼', false)" class="particle-btn flex-1 bg-gray-200 hover:bg-cyan-200 text-gray-800 font-bold py-2 px-4 rounded">ê³¼</button></div>
                    <div id="q6_answer" class="answer-box mt-3 p-3 bg-cyan-100 text-cyan-800 rounded-lg"><strong>RÃ©ponse :</strong> ì™€.<br><strong>Explication :</strong> AprÃ¨s une voyelle (ê¹€ì¹˜), on utilise 'ì™€'.</div>
                </div>
                <!-- Q7 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">7. Ã‰coutez et choisissez la particule de sujet.</p>
                    <div class="flex items-center space-x-4">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="ì œ ì¹œêµ¬ê°€ ì˜í™”ë¥¼ ë´ìš”.">ğŸ”Š</button>
                        <p class="text-xl font-medium">ì œ ì¹œêµ¬<span id="q7_blank" class="font-bold text-cyan-600">__</span> ì˜í™”ë¥¼ ë´ìš”.</p>
                    </div>
                    <div class="flex space-x-4 mt-4" id="q7_options"><button onclick="checkParticle('q7', 'ë¥¼', false)" class="particle-btn flex-1 bg-gray-200 hover:bg-cyan-200 text-gray-800 font-bold py-2 px-4 rounded">ë¥¼</button><button onclick="checkParticle('q7', 'ê°€', true)" class="particle-btn flex-1 bg-gray-200 hover:bg-cyan-200 text-gray-800 font-bold py-2 px-4 rounded">ê°€</button></div>
                    <div id="q7_answer" class="answer-box mt-3 p-3 bg-cyan-100 text-cyan-800 rounded-lg"><strong>RÃ©ponse :</strong> ê°€.<br><strong>Explication :</strong> 'ì¹œêµ¬' (voyelle) est le sujet, on utilise 'ê°€'.</div>
                </div>
                <!-- Q8 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">8. Ã‰coutez et choisissez la particule de thÃ¨me.</p>
                    <div class="flex items-center space-x-4">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="í•œêµ­ ì‚¬ëŒë“¤ì€ ê¹€ì¹˜ì°Œê°œë¥¼ ìì£¼ ë¨¹ì–´ìš”.">ğŸ”Š</button>
                        <p class="text-xl font-medium">í•œêµ­ ì‚¬ëŒ<span id="q8_blank" class="font-bold text-cyan-600">__</span> ê¹€ì¹˜ì°Œê°œë¥¼ ìì£¼ ë¨¹ì–´ìš”.</p>
                    </div>
                    <div class="flex space-x-4 mt-4" id="q8_options"><button onclick="checkParticle('q8', 'ì€', true)" class="particle-btn flex-1 bg-gray-200 hover:bg-cyan-200 text-gray-800 font-bold py-2 px-4 rounded">ì€</button><button onclick="checkParticle('q8', 'ëŠ”', false)" class="particle-btn flex-1 bg-gray-200 hover:bg-cyan-200 text-gray-800 font-bold py-2 px-4 rounded">ëŠ”</button></div>
                    <div id="q8_answer" class="answer-box mt-3 p-3 bg-cyan-100 text-cyan-800 rounded-lg"><strong>RÃ©ponse :</strong> ì€.<br><strong>Explication :</strong> AprÃ¨s une consonne (ì‚¬ëŒ), on utilise 'ì€'.</div>
                </div>
                <!-- Q9 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">9. Ã‰coutez et choisissez la particule d'objet (COD).</p>
                    <div class="flex items-center space-x-4">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="ì €ëŠ” ë°¥ì„ ë¨¹ì–´ìš”.">ğŸ”Š</button>
                        <p class="text-xl font-medium">ì €ëŠ” ë°¥<span id="q9_blank" class="font-bold text-cyan-600">__</span> ë¨¹ì–´ìš”.</p>
                    </div>
                    <div class="flex space-x-4 mt-4" id="q9_options"><button onclick="checkParticle('q9', 'ì„', true)" class="particle-btn flex-1 bg-gray-200 hover:bg-cyan-200 text-gray-800 font-bold py-2 px-4 rounded">ì„</button><button onclick="checkParticle('q9', 'ë¥¼', false)" class="particle-btn flex-1 bg-gray-200 hover:bg-cyan-200 text-gray-800 font-bold py-2 px-4 rounded">ë¥¼</button></div>
                    <div id="q9_answer" class="answer-box mt-3 p-3 bg-cyan-100 text-cyan-800 rounded-lg"><strong>RÃ©ponse :</strong> ì„.<br><strong>Explication :</strong> AprÃ¨s une consonne (ë°¥), on utilise 'ì„'.</div>
                </div>
                <!-- Q10 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">10. Ã‰coutez et choisissez la particule de lieu/destination.</p>
                    <div class="flex items-center space-x-4">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="ì €ëŠ” ì§‘ì— ë“¤ì–´ê°€ìš”.">ğŸ”Š</button>
                        <p class="text-xl font-medium">ì €ëŠ” ì§‘<span id="q10_blank" class="font-bold text-cyan-600">__</span> ë“¤ì–´ê°€ìš”.</p>
                    </div>
                    <div class="flex space-x-4 mt-4" id="q10_options"><button onclick="checkParticle('q10', 'ì—', true)" class="particle-btn flex-1 bg-gray-200 hover:bg-cyan-200 text-gray-800 font-bold py-2 px-4 rounded">ì—</button><button onclick="checkParticle('q10', 'ì—ì„œ', false)" class="particle-btn flex-1 bg-gray-200 hover:bg-cyan-200 text-gray-800 font-bold py-2 px-4 rounded">ì—ì„œ</button></div>
                    <div id="q10_answer" class="answer-box mt-3 p-3 bg-cyan-100 text-cyan-800 rounded-lg"><strong>RÃ©ponse :</strong> ì—.<br><strong>Explication :</strong> Pour une destination (verbe de mouvement comme ë“¤ì–´ê°€ë‹¤), on utilise 'ì—'.</div>
                </div>
            </div>
        </section>

        <!-- Exercice 3: Vrai ou Faux -->
        <section class="mb-12">
            <h2 class="text-2xl font-bold mb-4 text-gray-700 border-l-4 border-green-500 pl-4">Exercice 3 : Vrai ou Faux (O/X í€´ì¦ˆ)</h2>
            <div class="space-y-6">
                <!-- Q11 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">11. Ã‰coutez la question. L'affirmation est-elle la bonne traduction ?</p>
                    <div class="flex items-center space-x-4 mb-4">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="ì˜ ë³´ì—¬ìš”?">ğŸ”Š</button>
                        <p class="italic text-gray-600">Affirmation : "Tu me vois bien ?"</p>
                    </div>
                    <div class="flex space-x-4" id="q11_options"><button onclick="checkTrueFalse('q11', true)" class="flex-1 bg-blue-200 hover:bg-blue-300 text-blue-800 font-bold py-2 px-4 rounded">Vrai (O)</button><button onclick="checkTrueFalse('q11', false)" class="flex-1 bg-red-200 hover:bg-red-300 text-red-800 font-bold py-2 px-4 rounded">Faux (X)</button></div>
                    <div id="q11_answer" class="answer-box mt-3 p-3 bg-green-100 text-green-800 rounded-lg"><strong>RÃ©ponse :</strong> Vrai (O).<br><strong>Explication :</strong> La phrase "ì˜ ë³´ì—¬ìš”?" signifie bien "Tu me vois bien ?".</div>
                </div>
                <!-- Q12 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">12. Ã‰coutez la phrase. L'affirmation est-elle correcte ?</p>
                    <div class="flex items-center space-x-4 mb-4">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="ì €ëŠ” ìŒ€ì„ ìì£¼ ë¨¹ì–´ìš”.">ğŸ”Š</button>
                        <p class="italic text-gray-600">Affirmation : "Je mange souvent des pÃ¢tes."</p>
                    </div>
                    <div class="flex space-x-4" id="q12_options"><button onclick="checkTrueFalse('q12', false)" class="flex-1 bg-blue-200 hover:bg-blue-300 text-blue-800 font-bold py-2 px-4 rounded">Vrai (O)</button><button onclick="checkTrueFalse('q12', true)" class="flex-1 bg-red-200 hover:bg-red-300 text-red-800 font-bold py-2 px-4 rounded">Faux (X)</button></div>
                    <div id="q12_answer" class="answer-box mt-3 p-3 bg-red-100 text-red-800 rounded-lg"><strong>RÃ©ponse :</strong> Faux (X).<br><strong>Explication :</strong> La phrase dit "Je mange souvent du riz (ìŒ€)".</div>
                </div>
                <!-- Q13 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">13. Ã‰coutez la phrase. L'affirmation est-elle correcte ?</p>
                    <div class="flex items-center space-x-4 mb-4">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="ì œ ì¹œêµ¬ê°€ ì¹œêµ¬ë“¤ì„ ì•ˆ ë§Œë‚¬ì–´ìš”.">ğŸ”Š</button>
                        <p class="italic text-gray-600">Affirmation : "Mon ami a rencontrÃ© ses amis."</p>
                    </div>
                    <div class="flex space-x-4" id="q13_options"><button onclick="checkTrueFalse('q13', false)" class="flex-1 bg-blue-200 hover:bg-blue-300 text-blue-800 font-bold py-2 px-4 rounded">Vrai (O)</button><button onclick="checkTrueFalse('q13', true)" class="flex-1 bg-red-200 hover:bg-red-300 text-red-800 font-bold py-2 px-4 rounded">Faux (X)</button></div>
                    <div id="q13_answer" class="answer-box mt-3 p-3 bg-red-100 text-red-800 rounded-lg"><strong>RÃ©ponse :</strong> Faux (X).<br><strong>Explication :</strong> La phrase est nÃ©gative (ì•ˆ ë§Œë‚¬ì–´ìš”), "Mon ami n'a pas rencontrÃ© ses amis."</div>
                </div>
                <!-- Q14 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">14. Ã‰coutez la phrase. L'affirmation est-elle correcte ?</p>
                    <div class="flex items-center space-x-4 mb-4">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="í”„ë‘ìŠ¤ ì‚¬ëŒë“¤ì€ ë°”ê²ŒíŠ¸ë¥¼ ê°€ë” ë¨¹ì–´ìš”.">ğŸ”Š</button>
                        <p class="italic text-gray-600">Affirmation : "Les FranÃ§ais mangent parfois de la baguette."</p>
                    </div>
                    <div class="flex space-x-4" id="q14_options"><button onclick="checkTrueFalse('q14', true)" class="flex-1 bg-blue-200 hover:bg-blue-300 text-blue-800 font-bold py-2 px-4 rounded">Vrai (O)</button><button onclick="checkTrueFalse('q14', false)" class="flex-1 bg-red-200 hover:bg-red-300 text-red-800 font-bold py-2 px-4 rounded">Faux (X)</button></div>
                    <div id="q14_answer" class="answer-box mt-3 p-3 bg-green-100 text-green-800 rounded-lg"><strong>RÃ©ponse :</strong> Vrai (O).<br><strong>Explication :</strong> ê°€ë” signifie "parfois".</div>
                </div>
                <!-- Q15 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">15. Ã‰coutez la phrase. L'affirmation est-elle correcte ?</p>
                    <div class="flex items-center space-x-4 mb-4">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="ì €ëŠ” ì§‘ì— ë“¤ì–´ê°€ìš”.">ğŸ”Š</button>
                        <p class="italic text-gray-600">Affirmation : "J'entre dans un restaurant."</p>
                    </div>
                    <div class="flex space-x-4" id="q15_options"><button onclick="checkTrueFalse('q15', false)" class="flex-1 bg-blue-200 hover:bg-blue-300 text-blue-800 font-bold py-2 px-4 rounded">Vrai (O)</button><button onclick="checkTrueFalse('q15', true)" class="flex-1 bg-red-200 hover:bg-red-300 text-red-800 font-bold py-2 px-4 rounded">Faux (X)</button></div>
                    <div id="q15_answer" class="answer-box mt-3 p-3 bg-red-100 text-red-800 rounded-lg"><strong>RÃ©ponse :</strong> Faux (X).<br><strong>Explication :</strong> La phrase dit "Je rentre Ã  la maison (ì§‘)". Restaurant se dit ì‹ë‹¹.</div>
                </div>
            </div>
        </section>

        <!-- Exercice 4: DictÃ©e et Combinaison -->
        <section>
            <h2 class="text-2xl font-bold mb-4 text-gray-700 border-l-4 border-purple-500 pl-4">Exercice 4 : DictÃ©e et Combinaison (ë°›ì•„ì“°ê¸° ë° ë¬¸ì¥ ì—°ê²°)</h2>
            <div class="space-y-6">
                <!-- Q16 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">16. <strong>DictÃ©e :</strong> Ã‰coutez et Ã©crivez la phrase complÃ¨te.</p>
                    <div class="flex items-center space-x-4 mb-3">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="ì €ëŠ” ì¹œêµ¬ë¥¼ ì•ˆ ë§Œë‚˜ê³  ì˜í™”ë¥¼ ì•ˆ ë´¤ì–´ìš”.">ğŸ”Š</button>
                        <input type="text" id="q16_input" class="w-full p-2 border-2 border-gray-300 rounded-md focus:border-purple-500 outline-none" placeholder="Ã‰crivez ce que vous entendez...">
                    </div>
                    <div class="mt-4 text-right"><button onclick="toggleAnswer('q16_answer')" class="bg-purple-500 text-white py-1 px-4 rounded-md hover:bg-purple-600 transition">RÃ©ponse</button></div>
                    <div id="q16_answer" class="answer-box mt-3 p-3 bg-purple-100 text-purple-800 rounded-lg"><strong>Phrase :</strong> ì €ëŠ” ì¹œêµ¬ë¥¼ ì•ˆ ë§Œë‚˜ê³  ì˜í™”ë¥¼ ì•ˆ ë´¤ì–´ìš”.<br><strong>Traduction :</strong> Je n'ai pas rencontrÃ© mes amis et je n'ai pas regardÃ© de film.</div>
                </div>
                <!-- Q17 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">17. <strong>DictÃ©e :</strong> Ã‰coutez et Ã©crivez la phrase complÃ¨te.</p>
                    <div class="flex items-center space-x-4 mb-3">
                        <button class="audio-btn bg-gray-700 text-white w-12 h-12 rounded-full flex items-center justify-center text-2xl" data-text="ê¹€ì¹˜í•˜ê³  ë°¥ì„ ê°™ì´ ë¨¹ì–´ìš”.">ğŸ”Š</button>
                        <input type="text" id="q17_input" class="w-full p-2 border-2 border-gray-300 rounded-md focus:border-purple-500 outline-none" placeholder="Ã‰crivez ce que vous entendez...">
                    </div>
                    <div class="mt-4 text-right"><button onclick="toggleAnswer('q17_answer')" class="bg-purple-500 text-white py-1 px-4 rounded-md hover:bg-purple-600 transition">RÃ©ponse</button></div>
                    <div id="q17_answer" class="answer-box mt-3 p-3 bg-purple-100 text-purple-800 rounded-lg"><strong>Phrase :</strong> ê¹€ì¹˜í•˜ê³  ë°¥ì„ ê°™ì´ ë¨¹ì–´ìš”.<br><strong>Traduction :</strong> Je mange du kimchi et du riz ensemble.</div>
                </div>
                <!-- Q18 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">18. <strong>Combinaison (-ê³ ) :</strong> Combinez les deux phrases.</p>
                    <div class="mb-4"><p class="text-xl font-medium">Phrase 1 : ë¼ì§€ê³ ê¸°ë¥¼ ëƒ„ë¹„ì— ë„£ì–´ìš”.<br>Phrase 2 : ë³¶ì•„ìš”.</p></div>
                    <input type="text" id="q18_input" class="w-full p-2 border-2 border-gray-300 rounded-md focus:border-purple-500 outline-none" placeholder="Combinez les deux phrases ici...">
                    <div class="mt-4 text-right"><button onclick="toggleAnswer('q18_answer')" class="bg-purple-500 text-white py-1 px-4 rounded-md hover:bg-purple-600 transition">RÃ©ponse</button></div>
                    <div id="q18_answer" class="answer-box mt-3 p-3 bg-purple-100 text-purple-800 rounded-lg"><strong>RÃ©ponse :</strong> ë¼ì§€ê³ ê¸°ë¥¼ ëƒ„ë¹„ì— ë„£ê³  ë³¶ì•„ìš”.<br><strong>Explication :</strong> Radical (ë„£) + ê³  + verbe suivant.</div>
                </div>
                <!-- Q19 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">19. <strong>Combinaison (-ê³ ) :</strong> Combinez les deux phrases.</p>
                    <div class="mb-4"><p class="text-xl font-medium">Phrase 1 : ì €ëŠ” ì¹œêµ¬ë¥¼ ë§Œë‚˜ìš”.<br>Phrase 2 : ì˜í™”ë¥¼ ë´ìš”.</p></div>
                    <input type="text" id="q19_input" class="w-full p-2 border-2 border-gray-300 rounded-md focus:border-purple-500 outline-none" placeholder="Combinez les deux phrases ici...">
                    <div class="mt-4 text-right"><button onclick="toggleAnswer('q19_answer')" class="bg-purple-500 text-white py-1 px-4 rounded-md hover:bg-purple-600 transition">RÃ©ponse</button></div>
                    <div id="q19_answer" class="answer-box mt-3 p-3 bg-purple-100 text-purple-800 rounded-lg"><strong>RÃ©ponse :</strong> ì €ëŠ” ì¹œêµ¬ë¥¼ ë§Œë‚˜ê³  ì˜í™”ë¥¼ ë´ìš”.<br><strong>Traduction :</strong> Je rencontre mes amis et je regarde un film.</div>
                </div>
                <!-- Q20 -->
                <div class="bg-gray-50 p-5 rounded-lg shadow-sm">
                    <p class="mb-3 text-lg">20. <strong>Combinaison (-ê³ ) :</strong> Combinez les deux phrases.</p>
                    <div class="mb-4"><p class="text-xl font-medium">Phrase 1 : ì‹ë‹¹ì— ë“¤ì–´ê°€ìš”.<br>Phrase 2 : ê°™ì´ ë¨¹ì–´ìš”.</p></div>
                    <input type="text" id="q20_input" class="w-full p-2 border-2 border-gray-300 rounded-md focus:border-purple-500 outline-none" placeholder="Combinez les deux phrases ici...">
                    <div class="mt-4 text-right"><button onclick="toggleAnswer('q20_answer')" class="bg-purple-500 text-white py-1 px-4 rounded-md hover:bg-purple-600 transition">RÃ©ponse</button></div>
                    <div id="q20_answer" class="answer-box mt-3 p-3 bg-purple-100 text-purple-800 rounded-lg"><strong>RÃ©ponse :</strong> ì‹ë‹¹ì— ë“¤ì–´ê°€ê³  ê°™ì´ ë¨¹ì–´ìš”.<br><strong>Traduction :</strong> On entre dans le restaurant et on mange ensemble.</div>
                </div>
            </div>
        </section>

    </div>

    <script>
        const apiKey = ""; 
        let currentAudio = null;

        function base64ToArrayBuffer(base64) {
            const binaryString = window.atob(base64);
            const len = binaryString.length;
            const bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) {
                bytes[i] = binaryString.charCodeAt(i);
            }
            return bytes.buffer;
        }

        function pcmToWav(pcmData, sampleRate) {
            const pcm16 = new Int16Array(pcmData);
            const header = new ArrayBuffer(44);
            const view = new DataView(header);

            function writeString(view, offset, string) {
                for (let i = 0; i < string.length; i++) {
                    view.setUint8(offset + i, string.charCodeAt(i));
                }
            }

            writeString(view, 0, 'RIFF');
            view.setUint32(4, 36 + pcm16.byteLength, true);
            writeString(view, 8, 'WAVE');
            writeString(view, 12, 'fmt ');
            view.setUint32(16, 16, true);
            view.setUint16(20, 1, true);
            const numChannels = 1;
            view.setUint16(22, numChannels, true);
            view.setUint32(24, sampleRate, true);
            view.setUint32(28, sampleRate * numChannels * 2, true);
            view.setUint16(32, numChannels * 2, true);
            view.setUint16(34, 16, true);
            writeString(view, 36, 'data');
            view.setUint32(40, pcm16.byteLength, true);

            return new Blob([header, pcm16], { type: 'audio/wav' });
        }

        async function generateAndPlayAudio(text, buttonElement) {
            if (buttonElement.classList.contains('loading')) return;

            buttonElement.classList.add('loading');
            const originalContent = buttonElement.innerHTML;
            buttonElement.textContent = '...';
            
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }

            try {
                const payload = {
                    contents: [{ parts: [{ text: text }] }],
                    generationConfig: {
                        responseModalities: ["AUDIO"],
                        speechConfig: { voiceConfig: { prebuiltVoiceConfig: { voiceName: "Kore" } } }
                    },
                    model: "gemini-2.5-flash-preview-tts"
                };

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) throw new Error(`API request failed with status ${response.status}`);

                const result = await response.json();
                const part = result?.candidates?.[0]?.content?.parts?.[0];
                const audioData = part?.inlineData?.data;
                const mimeType = part?.inlineData?.mimeType;

                if (audioData && mimeType && mimeType.startsWith("audio/")) {
                    const sampleRateMatch = mimeType.match(/rate=(\d+)/);
                    const sampleRate = sampleRateMatch ? parseInt(sampleRateMatch[1], 10) : 24000;
                    const pcmData = base64ToArrayBuffer(audioData);
                    const wavBlob = pcmToWav(pcmData, sampleRate);
                    const audioUrl = URL.createObjectURL(wavBlob);
                    
                    currentAudio = new Audio(audioUrl);
                    currentAudio.play();
                    currentAudio.onended = () => {
                        buttonElement.classList.remove('loading');
                        buttonElement.innerHTML = originalContent;
                    };
                } else {
                    throw new Error("Invalid audio data in response.");
                }
            } catch (error) {
                console.error("Error generating or playing audio:", error);
                buttonElement.classList.remove('loading');
                buttonElement.innerHTML = originalContent;
            }
        }

        document.querySelectorAll('.audio-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                e.stopPropagation();
                const textToSpeak = button.dataset.text;
                generateAndPlayAudio(textToSpeak, button);
            });
        });

        function toggleAnswer(elementId) {
            document.getElementById(elementId).classList.toggle('show');
        }

        function checkParticle(questionId, chosenParticle, isCorrect) {
            const answerBox = document.getElementById(questionId + '_answer');
            const optionsContainer = document.getElementById(questionId + '_options');
            const blank = document.getElementById(questionId + '_blank');
            
            blank.textContent = chosenParticle;
            answerBox.classList.add('show');
            
            optionsContainer.querySelectorAll('button').forEach(btn => {
                btn.disabled = true;
                if (btn.textContent === chosenParticle) {
                    btn.classList.remove('bg-gray-200', 'hover:bg-cyan-200');
                    if (isCorrect) {
                        btn.classList.add('bg-green-500', 'text-white');
                        blank.classList.add('text-green-600');
                    } else {
                        btn.classList.add('bg-red-500', 'text-white');
                        blank.classList.add('text-red-600');
                    }
                } else {
                    btn.classList.add('opacity-50');
                }
            });
        }
        
        function checkTrueFalse(questionId, isChoiceCorrect) {
            const answerBox = document.getElementById(questionId + '_answer');
            const optionsContainer = document.getElementById(questionId + '_options');
            
            answerBox.classList.add('show');
            
            optionsContainer.querySelectorAll('button').forEach(btn => {
                btn.disabled = true;
                const isThisTheCorrectButton = (btn.textContent.includes('Vrai') && isChoiceCorrect) || (btn.textContent.includes('Faux') && !isChoiceCorrect);
                if (isThisTheCorrectButton) {
                     btn.classList.add('ring-4', 'ring-green-500');
                } else {
                     btn.classList.add('opacity-50');
                }
            });
        }
    </script>
</body>
</html>
